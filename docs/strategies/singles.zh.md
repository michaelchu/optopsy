# 单腿策略

单腿策略涉及买入或卖出单个 call 或 put 期权。这些是最简单的期权策略,是更复杂的多腿策略的基础。

## Long Calls

#### 描述
Long call 赋予您以行权价买入标的资产的权利。这是一种看涨策略,具有无限的盈利潜力和有限的风险(支付的权利金)。

#### 市场观点
- **看涨** - 预期价格大幅上涨
- 随着标的资产价格超过行权价 + 支付的权利金,利润增加

#### 盈亏
- **最大盈利**: 无限(标的资产价格 - 行权价 - 权利金)
- **最大损失**: 支付的权利金(如果标的资产保持在行权价以下)
- **盈亏平衡点**: 行权价 + 支付的权利金

#### 示例

```python
import optopsy as op

data = op.csv_data('SPX_options.csv')

# 回测 30-60 DTE 范围的 long calls
results = op.long_calls(
    data,
    max_entry_dte=60,
    exit_dte=30,
    max_otm_pct=0.10  # 略微虚值的 calls
)

print(results)
```

#### 使用场景
- 押注强劲上涨
- 买入股票的低成本替代方案
- 预期正面消息的财报交易
- 突破交易

---

## Short Calls

#### 描述
Short call 在被行权时有义务以行权价卖出标的资产。这是一种看跌或中性的收益策略,具有有限的盈利和理论上无限的风险。

#### 市场观点
- **看跌至中性** - 预期价格保持平稳或下跌
- 如果标的资产在到期时保持在行权价以下则获利

#### 盈亏
- **最大盈利**: 收到的权利金
- **最大损失**: 无限(标的资产价格 - 行权价 - 权利金)
- **盈亏平衡点**: 行权价 + 收到的权利金

#### 示例

```python
results = op.short_calls(
    data,
    max_entry_dte=45,
    exit_dte=0,  # 持有至到期
    max_otm_pct=0.30  # 卖出虚值 calls 以获得收益
)
```

#### 使用场景
- 在中性/看跌市场中创收
- 备兑 call 策略(持有股票)
- 高概率收益交易

#### ⚠️ 风险警告
裸空 call 在标的资产大幅上涨时具有无限风险。考虑使用有限风险的替代方案,如 call 价差。

---

## Long Puts

#### 描述
Long put 赋予您以行权价卖出标的资产的权利。这是一种看跌策略,具有可观的盈利潜力和有限的风险(支付的权利金)。

#### 市场观点
- **看跌** - 预期价格大幅下跌
- 随着标的资产价格跌破行权价 - 支付的权利金,利润增加

#### 盈亏
- **最大盈利**: 行权价 - 权利金 - 0(如果标的资产归零)
- **最大损失**: 支付的权利金(如果标的资产保持在行权价以上)
- **盈亏平衡点**: 行权价 - 支付的权利金

#### 示例

```python
results = op.long_puts(
    data,
    max_entry_dte=45,
    exit_dte=21,
    max_otm_pct=0.15  # 中度虚值 puts
)
```

#### 使用场景
- 押注市场下跌
- 投资组合对冲
- 预期负面消息的财报交易
- 突破下行交易

---

## Short Puts

#### 描述
Short put 在被行权时有义务以行权价买入标的资产。这是一种看涨的收益策略,您收取权利金,希望期权到期时失效。

#### 市场观点
- **看涨至中性** - 预期价格保持平稳或上涨
- 如果标的资产在到期时保持在行权价以上则获利

#### 盈亏
- **最大盈利**: 收到的权利金
- **最大损失**: 行权价 - 权利金(如果标的资产归零)
- **盈亏平衡点**: 行权价 - 收到的权利金

#### 示例

```python
results = op.short_puts(
    data,
    max_entry_dte=45,
    exit_dte=21,
    max_otm_pct=0.20,  # 20% OTM 以获得更安全的权利金
    min_bid_ask=0.10
)
```

#### 使用场景
- 在看涨市场中创收
- 以更低价格买入股票时"获得报酬等待"
- 高概率信用策略
- Wheel 策略(卖出 puts,被分配,卖出 calls)

#### 分配考虑
如果期权在到期时处于实值状态,您将有义务以行权价买入股票。确保您有资金或可以在到期前平仓。

---

## Greeks 过滤

所有单腿策略都支持 delta 过滤以定位特定的概率范围:

```python
# 目标 0.30 delta 期权(大约 30% 概率 ITM)
results = op.long_calls(
    data,
    delta_min=0.25,
    delta_max=0.35,
    delta_interval=0.05  # 按 delta 范围分组结果
)
```

## 滑点模型

配置现实的成交价格:

```python
# 使用基于流动性的滑点
results = op.long_calls(
    data,
    slippage='liquidity',
    fill_ratio=0.5,  # 价差的 50%
    reference_volume=1000  # 流动期权的最小成交量
)
```

可用的滑点模式:
- `'mid'` - 以中间价成交 (bid+ask)/2(默认)
- `'spread'` - 以 ask 买入,以 bid 卖出(最差情况)
- `'liquidity'` - 基于成交量/持仓量的动态成交

## 比较表

| 策略 | 方向 | 最大盈利 | 最大损失 | 最佳时机 |
|----------|-----------|-----------|----------|-----------|
| Long Call | 看涨 | 无限 | 权利金 | 预期上涨 |
| Short Call | 看跌/中性 | 权利金 | 无限 | 预期下跌/平稳 |
| Long Put | 看跌 | 可观 | 权利金 | 预期下跌 |
| Short Put | 看涨/中性 | 权利金 | 可观 | 预期上涨/平稳 |

## 下一步

- 了解 [Straddles & Strangles](straddles-strangles.md)
- 探索 [垂直价差](spreads.md) 以获得有限风险的替代方案
- 查看更多 [示例](../examples.md)
