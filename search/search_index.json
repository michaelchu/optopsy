{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Optopsy Documentation \u00b6 A fast, flexible backtesting library for options strategies in Python. What is Optopsy? \u00b6 Optopsy helps you answer questions like \"How do iron condors perform on SPX?\" or \"What delta range produces the best results for covered calls?\" by generating comprehensive performance statistics from historical options data. Key Features \u00b6 28 Built-in Strategies - From simple calls/puts to iron condors, butterflies, calendars, and diagonals Greeks Filtering - Filter options by delta to target specific probability ranges Slippage Modeling - Realistic fills with mid, spread, or liquidity-based slippage Flexible Grouping - Analyze results by DTE, OTM%, and delta intervals Any Data Source - Works with any options data in CSV or DataFrame format Pandas Native - Returns DataFrames that integrate with your existing workflow Quick Example \u00b6 import optopsy as op # Load your options data data = op . csv_data ( 'SPX_options.csv' ) # Backtest an iron condor strategy results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 ) print ( results ) Installation \u00b6 pip install optopsy Requirements: Python 3.8+, Pandas 2.0+, NumPy 1.26+ Getting Help \u00b6 Check the Getting Started guide for a detailed walkthrough Browse Strategies for available options strategies Review Parameters for configuration options See Examples for common use cases View the API Reference for complete function documentation Contributing \u00b6 Contributions are welcome! See the Contributing Guide for details. License \u00b6 Optopsy is released under the GPL-3.0 License. See the GitHub repository for more information.","title":"Home"},{"location":"#optopsy-documentation","text":"A fast, flexible backtesting library for options strategies in Python.","title":"Optopsy Documentation"},{"location":"#what-is-optopsy","text":"Optopsy helps you answer questions like \"How do iron condors perform on SPX?\" or \"What delta range produces the best results for covered calls?\" by generating comprehensive performance statistics from historical options data.","title":"What is Optopsy?"},{"location":"#key-features","text":"28 Built-in Strategies - From simple calls/puts to iron condors, butterflies, calendars, and diagonals Greeks Filtering - Filter options by delta to target specific probability ranges Slippage Modeling - Realistic fills with mid, spread, or liquidity-based slippage Flexible Grouping - Analyze results by DTE, OTM%, and delta intervals Any Data Source - Works with any options data in CSV or DataFrame format Pandas Native - Returns DataFrames that integrate with your existing workflow","title":"Key Features"},{"location":"#quick-example","text":"import optopsy as op # Load your options data data = op . csv_data ( 'SPX_options.csv' ) # Backtest an iron condor strategy results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 ) print ( results )","title":"Quick Example"},{"location":"#installation","text":"pip install optopsy Requirements: Python 3.8+, Pandas 2.0+, NumPy 1.26+","title":"Installation"},{"location":"#getting-help","text":"Check the Getting Started guide for a detailed walkthrough Browse Strategies for available options strategies Review Parameters for configuration options See Examples for common use cases View the API Reference for complete function documentation","title":"Getting Help"},{"location":"#contributing","text":"Contributions are welcome! See the Contributing Guide for details.","title":"Contributing"},{"location":"#license","text":"Optopsy is released under the GPL-3.0 License. See the GitHub repository for more information.","title":"License"},{"location":"api-reference/","text":"API Reference \u00b6 Complete API documentation for Optopsy functions. Common Parameters All strategy functions share common parameters. See the Common Parameters section below for detailed documentation of max_entry_dte , exit_dte , max_otm_pct , min_bid_ask , slippage settings, and more. Data Loading \u00b6 csv_data \u00b6 Load options data from CSV file. optopsy.datafeeds.csv_data \u00b6 csv_data ( file_path : str , start_date : Optional [ str ] = None , end_date : Optional [ str ] = None , underlying_symbol : int = 0 , underlying_price : int = 1 , option_type : int = 2 , expiration : int = 3 , quote_date : int = 4 , strike : int = 5 , bid : int = 6 , ask : int = 7 , delta : Optional [ int ] = None , gamma : Optional [ int ] = None , theta : Optional [ int ] = None , vega : Optional [ int ] = None , volume : Optional [ int ] = None , open_interest : Optional [ int ] = None , ) -> pd . DataFrame Import option chain data from CSV files with standardized column names. Uses pandas DataFrame.read_csv function to import data from CSV files. Automatically generates standardized headers for library use. Parameters: Name Type Description Default file_path str Path to CSV file required start_date Optional [ str ] Optional start date of dataset to consider (inclusive) None end_date Optional [ str ] Optional end date of dataset to consider (inclusive) None underlying_symbol int Column index containing underlying symbol 0 underlying_price int Column index containing underlying stock price 1 quote_date int Column index containing quote date 4 expiration int Column index containing expiration date 3 strike int Column index containing strike price 5 option_type int Column index containing option type (call/put) 2 bid int Column index containing bid price 6 ask int Column index containing ask price 7 delta Optional [ int ] Optional column index containing delta Greek None gamma Optional [ int ] Optional column index containing gamma Greek None theta Optional [ int ] Optional column index containing theta Greek None vega Optional [ int ] Optional column index containing vega Greek None volume Optional [ int ] Optional column index containing trading volume (used by liquidity slippage) None open_interest Optional [ int ] Optional column index containing open interest (reserved for future use) None Returns: Type Description DataFrame DataFrame with option chains and standardized column names Raises: Type Description FileNotFoundError If CSV file doesn't exist at specified path ValueError If CSV file is empty, has parsing errors, column mapping errors, or other data processing issues Single-Leg Strategies \u00b6 Note All single-leg strategies accept the same parameters. See Common Parameters for full documentation. long_calls \u00b6 optopsy.strategies.long_calls \u00b6 long_calls ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters (see StrategyParams) {} Returns: Type Description DataFrame DataFrame with long call strategy performance statistics short_calls \u00b6 optopsy.strategies.short_calls \u00b6 short_calls ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call strategy performance statistics long_puts \u00b6 optopsy.strategies.long_puts \u00b6 long_puts ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put strategy performance statistics short_puts \u00b6 optopsy.strategies.short_puts \u00b6 short_puts ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put strategy performance statistics Straddles & Strangles \u00b6 Note All straddle/strangle strategies accept the same parameters. See Common Parameters for full documentation. long_straddles \u00b6 optopsy.strategies.long_straddles \u00b6 long_straddles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long straddle strategy statistics (long call + long put at same strike). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long straddle strategy performance statistics short_straddles \u00b6 optopsy.strategies.short_straddles \u00b6 short_straddles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short straddle strategy statistics (short call + short put at same strike). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short straddle strategy performance statistics long_strangles \u00b6 optopsy.strategies.long_strangles \u00b6 long_strangles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long strangle strategy statistics (long call + long put at different strikes). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long strangle strategy performance statistics short_strangles \u00b6 optopsy.strategies.short_strangles \u00b6 short_strangles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short strangle strategy statistics (short call + short put at different strikes). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short strangle strategy performance statistics Vertical Spreads \u00b6 Note All vertical spread strategies accept the same parameters. See Common Parameters for full documentation. long_call_spread \u00b6 optopsy.strategies.long_call_spread \u00b6 long_call_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call spread (bull call spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call spread strategy performance statistics short_call_spread \u00b6 optopsy.strategies.short_call_spread \u00b6 short_call_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call spread (bear call spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call spread strategy performance statistics long_put_spread \u00b6 optopsy.strategies.long_put_spread \u00b6 long_put_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put spread (bear put spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put spread strategy performance statistics short_put_spread \u00b6 optopsy.strategies.short_put_spread \u00b6 short_put_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put spread (bull put spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put spread strategy performance statistics Butterfly Spreads \u00b6 Note All butterfly strategies accept the same parameters. See Common Parameters for full documentation. long_call_butterfly \u00b6 optopsy.strategies.long_call_butterfly \u00b6 long_call_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call butterfly strategy statistics. A long call butterfly consists of: - Long 1 call at lower strike (wing) - Short 2 calls at middle strike (body) - Long 1 call at upper strike (wing) This is a neutral strategy that profits when the underlying stays near the middle strike at expiration. Maximum profit occurs at the middle strike. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call butterfly strategy performance statistics short_call_butterfly \u00b6 optopsy.strategies.short_call_butterfly \u00b6 short_call_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call butterfly strategy statistics. A short call butterfly consists of: - Short 1 call at lower strike (wing) - Long 2 calls at middle strike (body) - Short 1 call at upper strike (wing) This strategy profits when the underlying moves significantly away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call butterfly strategy performance statistics long_put_butterfly \u00b6 optopsy.strategies.long_put_butterfly \u00b6 long_put_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put butterfly strategy statistics. A long put butterfly consists of: - Long 1 put at lower strike (wing) - Short 2 puts at middle strike (body) - Long 1 put at upper strike (wing) This is a neutral strategy that profits when the underlying stays near the middle strike at expiration. Maximum profit occurs at the middle strike. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put butterfly strategy performance statistics short_put_butterfly \u00b6 optopsy.strategies.short_put_butterfly \u00b6 short_put_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put butterfly strategy statistics. A short put butterfly consists of: - Short 1 put at lower strike (wing) - Long 2 puts at middle strike (body) - Short 1 put at upper strike (wing) This strategy profits when the underlying moves significantly away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put butterfly strategy performance statistics Iron Strategies \u00b6 Note All iron strategies accept the same parameters. See Common Parameters for full documentation. iron_condor \u00b6 optopsy.strategies.iron_condor \u00b6 iron_condor ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate iron condor strategy statistics. An iron condor consists of: - Long 1 put at lowest strike (protection) - Short 1 put at lower-middle strike (income) - Short 1 call at upper-middle strike (income) - Long 1 call at highest strike (protection) This is a neutral income strategy that profits when the underlying stays between the two short strikes. Maximum profit is the net credit received. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with iron condor strategy performance statistics reverse_iron_condor \u00b6 optopsy.strategies.reverse_iron_condor \u00b6 reverse_iron_condor ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate reverse iron condor strategy statistics. A reverse iron condor consists of: - Short 1 put at lowest strike - Long 1 put at lower-middle strike - Long 1 call at upper-middle strike - Short 1 call at highest strike This strategy profits when the underlying makes a significant move in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with reverse iron condor strategy performance statistics iron_butterfly \u00b6 optopsy.strategies.iron_butterfly \u00b6 iron_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate iron butterfly strategy statistics. An iron butterfly consists of: - Long 1 put at lowest strike (wing) - Short 1 put at middle strike (body) - Short 1 call at middle strike (body) - same strike as short put - Long 1 call at highest strike (wing) This is a neutral income strategy with higher profit potential than an iron condor, but a narrower profit zone. Maximum profit occurs when the underlying is exactly at the middle strike at expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with iron butterfly strategy performance statistics reverse_iron_butterfly \u00b6 optopsy.strategies.reverse_iron_butterfly \u00b6 reverse_iron_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate reverse iron butterfly strategy statistics. A reverse iron butterfly consists of: - Short 1 put at lowest strike (wing) - Long 1 put at middle strike (body) - Long 1 call at middle strike (body) - same strike as long put - Short 1 call at highest strike (wing) This strategy profits when the underlying makes a significant move away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with reverse iron butterfly strategy performance statistics Covered Strategies \u00b6 Note All covered strategies accept the same parameters. See Common Parameters for full documentation. covered_call \u00b6 optopsy.strategies.covered_call \u00b6 covered_call ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate covered call strategy statistics. A covered call consists of: - Long underlying position (simulated via long deep ITM call) - Short 1 call at higher strike This is an income strategy that profits from time decay on the short call while maintaining upside exposure up to the short strike. The long deep ITM call acts as a synthetic long stock position. Note: This implementation uses a synthetic approach with options only. For true covered call analysis with actual stock positions, additional data integration would be required. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with covered call strategy performance statistics protective_put \u00b6 optopsy.strategies.protective_put \u00b6 protective_put ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate protective put (married put) strategy statistics. A protective put consists of: - Long underlying position (simulated via long deep ITM call) - Long 1 put at lower strike for protection This strategy provides downside protection while maintaining upside potential. The long deep ITM call acts as a synthetic long stock position. Note: This implementation uses a synthetic approach with options only. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with protective put strategy performance statistics Calendar Spreads \u00b6 Note Calendar spreads have additional timing parameters ( front_dte_min , front_dte_max , back_dte_min , back_dte_max ) in addition to common parameters. See Common Parameters and Calendar/Diagonal Parameters for full documentation. long_call_calendar \u00b6 optopsy.strategies.long_call_calendar \u00b6 long_call_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call calendar spread strategy statistics. A long call calendar consists of: - Short 1 front-month call (near-term expiration) - Long 1 back-month call (longer-term expiration) - Both at the same strike This is a neutral strategy that profits from time decay differential between the two expirations. Maximum profit occurs when the underlying is at the strike price at front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters including: - front_dte_min: Minimum DTE for front leg (default: 20) - front_dte_max: Maximum DTE for front leg (default: 40) - back_dte_min: Minimum DTE for back leg (default: 50) - back_dte_max: Maximum DTE for back leg (default: 90) - exit_dte: Days before front expiration to exit (default: 7) {} Returns: Type Description DataFrame DataFrame with long call calendar spread strategy performance statistics short_call_calendar \u00b6 optopsy.strategies.short_call_calendar \u00b6 short_call_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call calendar spread strategy statistics. A short call calendar consists of: - Long 1 front-month call (near-term expiration) - Short 1 back-month call (longer-term expiration) - Both at the same strike This strategy profits when the underlying moves significantly away from the strike price before front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call calendar spread strategy performance statistics long_put_calendar \u00b6 optopsy.strategies.long_put_calendar \u00b6 long_put_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put calendar spread strategy statistics. A long put calendar consists of: - Short 1 front-month put (near-term expiration) - Long 1 back-month put (longer-term expiration) - Both at the same strike This is a neutral strategy that profits from time decay differential between the two expirations. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put calendar spread strategy performance statistics short_put_calendar \u00b6 optopsy.strategies.short_put_calendar \u00b6 short_put_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put calendar spread strategy statistics. A short put calendar consists of: - Long 1 front-month put (near-term expiration) - Short 1 back-month put (longer-term expiration) - Both at the same strike This strategy profits when the underlying moves significantly away from the strike price before front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put calendar spread strategy performance statistics Diagonal Spreads \u00b6 Note Diagonal spreads have additional timing parameters ( front_dte_min , front_dte_max , back_dte_min , back_dte_max ) in addition to common parameters. See Common Parameters and Calendar/Diagonal Parameters for full documentation. long_call_diagonal \u00b6 optopsy.strategies.long_call_diagonal \u00b6 long_call_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call diagonal spread strategy statistics. A long call diagonal consists of: - Short 1 front-month call (near-term expiration) - Long 1 back-month call (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call diagonal spread strategy performance statistics short_call_diagonal \u00b6 optopsy.strategies.short_call_diagonal \u00b6 short_call_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call diagonal spread strategy statistics. A short call diagonal consists of: - Long 1 front-month call (near-term expiration) - Short 1 back-month call (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call diagonal spread strategy performance statistics long_put_diagonal \u00b6 optopsy.strategies.long_put_diagonal \u00b6 long_put_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put diagonal spread strategy statistics. A long put diagonal consists of: - Short 1 front-month put (near-term expiration) - Long 1 back-month put (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put diagonal spread strategy performance statistics short_put_diagonal \u00b6 optopsy.strategies.short_put_diagonal \u00b6 short_put_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put diagonal spread strategy statistics. A short put diagonal consists of: - Long 1 front-month put (near-term expiration) - Short 1 back-month put (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put diagonal spread strategy performance statistics Common Parameters \u00b6 All strategy functions accept these common parameters: Timing Parameters \u00b6 max_entry_dte (int, default=90): Maximum days to expiration at entry exit_dte (int, default=0): Days to expiration at exit dte_interval (int, default=7): Grouping interval for DTE ranges Filtering Parameters \u00b6 max_otm_pct (float, default=0.5): Maximum out-of-the-money percentage otm_pct_interval (float, default=0.05): Grouping interval for OTM ranges min_bid_ask (float, default=0.05): Minimum bid-ask spread filter Greeks Parameters \u00b6 delta_min (float, optional): Minimum delta filter delta_max (float, optional): Maximum delta filter delta_interval (float, optional): Grouping interval for delta ranges Slippage Parameters \u00b6 slippage (str, default='mid'): Slippage mode - 'mid', 'spread', or 'liquidity' fill_ratio (float, default=0.5): Fill ratio for liquidity mode (0.0-1.0) reference_volume (int, default=1000): Volume threshold for liquid options Output Parameters \u00b6 raw (bool, default=False): Return raw trade data instead of aggregated stats drop_nan (bool, default=True): Drop rows with NaN values Calendar/Diagonal Parameters \u00b6 These strategies have additional timing parameters: front_dte_min (int, default=20): Minimum DTE for front leg front_dte_max (int, default=40): Maximum DTE for front leg back_dte_min (int, default=50): Minimum DTE for back leg back_dte_max (int, default=90): Maximum DTE for back leg Return Values \u00b6 Aggregated Results (default) \u00b6 When raw=False (default), strategies return aggregated statistics: Columns: - dte_range : DTE interval group - otm_pct_range : OTM percentage interval group - count : Number of trades in group - mean : Mean return - std : Standard deviation of returns - min : Minimum return - 25% : 25th percentile - 50% : Median return - 75% : 75th percentile - max : Maximum return Raw Trade Data \u00b6 When raw=True , strategies return individual trade details: Columns (vary by strategy): - underlying_symbol : Ticker symbol - expiration : Option expiration date - dte_entry : Days to expiration at entry - strike / strike_leg1 , strike_leg2 , etc.: Strike prices - entry : Entry price/cost - exit : Exit price/proceeds - pct_change : Percentage return - Additional strategy-specific columns Examples \u00b6 See the Examples page for detailed usage examples. Type Hints \u00b6 All functions include full type hints with TypedDict for IDE autocomplete support: from typing import Unpack import pandas as pd from optopsy import StrategyParams def long_calls ( data : pd . DataFrame , ** kwargs : Unpack [ StrategyParams ]) -> pd . DataFrame : ... Using Type Hints \u00b6 Import StrategyParams or CalendarStrategyParams for better IDE support: import optopsy as op from optopsy import StrategyParams # Your IDE will now provide autocomplete for all parameters results = op . iron_condor ( data , max_entry_dte = 45 , # Type: int exit_dte = 21 , # Type: int slippage = 'liquidity' , # Type: Literal['mid', 'spread', 'liquidity'] fill_ratio = 0.5 , # Type: float ) See TYPE_HINTS.md for detailed documentation on using type hints with Optopsy.","title":"API Reference"},{"location":"api-reference/#api-reference","text":"Complete API documentation for Optopsy functions. Common Parameters All strategy functions share common parameters. See the Common Parameters section below for detailed documentation of max_entry_dte , exit_dte , max_otm_pct , min_bid_ask , slippage settings, and more.","title":"API Reference"},{"location":"api-reference/#data-loading","text":"","title":"Data Loading"},{"location":"api-reference/#csv_data","text":"Load options data from CSV file.","title":"csv_data"},{"location":"api-reference/#optopsy.datafeeds.csv_data","text":"csv_data ( file_path : str , start_date : Optional [ str ] = None , end_date : Optional [ str ] = None , underlying_symbol : int = 0 , underlying_price : int = 1 , option_type : int = 2 , expiration : int = 3 , quote_date : int = 4 , strike : int = 5 , bid : int = 6 , ask : int = 7 , delta : Optional [ int ] = None , gamma : Optional [ int ] = None , theta : Optional [ int ] = None , vega : Optional [ int ] = None , volume : Optional [ int ] = None , open_interest : Optional [ int ] = None , ) -> pd . DataFrame Import option chain data from CSV files with standardized column names. Uses pandas DataFrame.read_csv function to import data from CSV files. Automatically generates standardized headers for library use. Parameters: Name Type Description Default file_path str Path to CSV file required start_date Optional [ str ] Optional start date of dataset to consider (inclusive) None end_date Optional [ str ] Optional end date of dataset to consider (inclusive) None underlying_symbol int Column index containing underlying symbol 0 underlying_price int Column index containing underlying stock price 1 quote_date int Column index containing quote date 4 expiration int Column index containing expiration date 3 strike int Column index containing strike price 5 option_type int Column index containing option type (call/put) 2 bid int Column index containing bid price 6 ask int Column index containing ask price 7 delta Optional [ int ] Optional column index containing delta Greek None gamma Optional [ int ] Optional column index containing gamma Greek None theta Optional [ int ] Optional column index containing theta Greek None vega Optional [ int ] Optional column index containing vega Greek None volume Optional [ int ] Optional column index containing trading volume (used by liquidity slippage) None open_interest Optional [ int ] Optional column index containing open interest (reserved for future use) None Returns: Type Description DataFrame DataFrame with option chains and standardized column names Raises: Type Description FileNotFoundError If CSV file doesn't exist at specified path ValueError If CSV file is empty, has parsing errors, column mapping errors, or other data processing issues","title":"csv_data"},{"location":"api-reference/#single-leg-strategies","text":"Note All single-leg strategies accept the same parameters. See Common Parameters for full documentation.","title":"Single-Leg Strategies"},{"location":"api-reference/#long_calls","text":"","title":"long_calls"},{"location":"api-reference/#optopsy.strategies.long_calls","text":"long_calls ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters (see StrategyParams) {} Returns: Type Description DataFrame DataFrame with long call strategy performance statistics","title":"long_calls"},{"location":"api-reference/#short_calls","text":"","title":"short_calls"},{"location":"api-reference/#optopsy.strategies.short_calls","text":"short_calls ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call strategy performance statistics","title":"short_calls"},{"location":"api-reference/#long_puts","text":"","title":"long_puts"},{"location":"api-reference/#optopsy.strategies.long_puts","text":"long_puts ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put strategy performance statistics","title":"long_puts"},{"location":"api-reference/#short_puts","text":"","title":"short_puts"},{"location":"api-reference/#optopsy.strategies.short_puts","text":"short_puts ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put strategy statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put strategy performance statistics","title":"short_puts"},{"location":"api-reference/#straddles-strangles","text":"Note All straddle/strangle strategies accept the same parameters. See Common Parameters for full documentation.","title":"Straddles &amp; Strangles"},{"location":"api-reference/#long_straddles","text":"","title":"long_straddles"},{"location":"api-reference/#optopsy.strategies.long_straddles","text":"long_straddles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long straddle strategy statistics (long call + long put at same strike). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long straddle strategy performance statistics","title":"long_straddles"},{"location":"api-reference/#short_straddles","text":"","title":"short_straddles"},{"location":"api-reference/#optopsy.strategies.short_straddles","text":"short_straddles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short straddle strategy statistics (short call + short put at same strike). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short straddle strategy performance statistics","title":"short_straddles"},{"location":"api-reference/#long_strangles","text":"","title":"long_strangles"},{"location":"api-reference/#optopsy.strategies.long_strangles","text":"long_strangles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long strangle strategy statistics (long call + long put at different strikes). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long strangle strategy performance statistics","title":"long_strangles"},{"location":"api-reference/#short_strangles","text":"","title":"short_strangles"},{"location":"api-reference/#optopsy.strategies.short_strangles","text":"short_strangles ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short strangle strategy statistics (short call + short put at different strikes). Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short strangle strategy performance statistics","title":"short_strangles"},{"location":"api-reference/#vertical-spreads","text":"Note All vertical spread strategies accept the same parameters. See Common Parameters for full documentation.","title":"Vertical Spreads"},{"location":"api-reference/#long_call_spread","text":"","title":"long_call_spread"},{"location":"api-reference/#optopsy.strategies.long_call_spread","text":"long_call_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call spread (bull call spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call spread strategy performance statistics","title":"long_call_spread"},{"location":"api-reference/#short_call_spread","text":"","title":"short_call_spread"},{"location":"api-reference/#optopsy.strategies.short_call_spread","text":"short_call_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call spread (bear call spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call spread strategy performance statistics","title":"short_call_spread"},{"location":"api-reference/#long_put_spread","text":"","title":"long_put_spread"},{"location":"api-reference/#optopsy.strategies.long_put_spread","text":"long_put_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put spread (bear put spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put spread strategy performance statistics","title":"long_put_spread"},{"location":"api-reference/#short_put_spread","text":"","title":"short_put_spread"},{"location":"api-reference/#optopsy.strategies.short_put_spread","text":"short_put_spread ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put spread (bull put spread) statistics. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put spread strategy performance statistics","title":"short_put_spread"},{"location":"api-reference/#butterfly-spreads","text":"Note All butterfly strategies accept the same parameters. See Common Parameters for full documentation.","title":"Butterfly Spreads"},{"location":"api-reference/#long_call_butterfly","text":"","title":"long_call_butterfly"},{"location":"api-reference/#optopsy.strategies.long_call_butterfly","text":"long_call_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call butterfly strategy statistics. A long call butterfly consists of: - Long 1 call at lower strike (wing) - Short 2 calls at middle strike (body) - Long 1 call at upper strike (wing) This is a neutral strategy that profits when the underlying stays near the middle strike at expiration. Maximum profit occurs at the middle strike. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call butterfly strategy performance statistics","title":"long_call_butterfly"},{"location":"api-reference/#short_call_butterfly","text":"","title":"short_call_butterfly"},{"location":"api-reference/#optopsy.strategies.short_call_butterfly","text":"short_call_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call butterfly strategy statistics. A short call butterfly consists of: - Short 1 call at lower strike (wing) - Long 2 calls at middle strike (body) - Short 1 call at upper strike (wing) This strategy profits when the underlying moves significantly away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call butterfly strategy performance statistics","title":"short_call_butterfly"},{"location":"api-reference/#long_put_butterfly","text":"","title":"long_put_butterfly"},{"location":"api-reference/#optopsy.strategies.long_put_butterfly","text":"long_put_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put butterfly strategy statistics. A long put butterfly consists of: - Long 1 put at lower strike (wing) - Short 2 puts at middle strike (body) - Long 1 put at upper strike (wing) This is a neutral strategy that profits when the underlying stays near the middle strike at expiration. Maximum profit occurs at the middle strike. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put butterfly strategy performance statistics","title":"long_put_butterfly"},{"location":"api-reference/#short_put_butterfly","text":"","title":"short_put_butterfly"},{"location":"api-reference/#optopsy.strategies.short_put_butterfly","text":"short_put_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put butterfly strategy statistics. A short put butterfly consists of: - Short 1 put at lower strike (wing) - Long 2 puts at middle strike (body) - Short 1 put at upper strike (wing) This strategy profits when the underlying moves significantly away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put butterfly strategy performance statistics","title":"short_put_butterfly"},{"location":"api-reference/#iron-strategies","text":"Note All iron strategies accept the same parameters. See Common Parameters for full documentation.","title":"Iron Strategies"},{"location":"api-reference/#iron_condor","text":"","title":"iron_condor"},{"location":"api-reference/#optopsy.strategies.iron_condor","text":"iron_condor ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate iron condor strategy statistics. An iron condor consists of: - Long 1 put at lowest strike (protection) - Short 1 put at lower-middle strike (income) - Short 1 call at upper-middle strike (income) - Long 1 call at highest strike (protection) This is a neutral income strategy that profits when the underlying stays between the two short strikes. Maximum profit is the net credit received. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with iron condor strategy performance statistics","title":"iron_condor"},{"location":"api-reference/#reverse_iron_condor","text":"","title":"reverse_iron_condor"},{"location":"api-reference/#optopsy.strategies.reverse_iron_condor","text":"reverse_iron_condor ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate reverse iron condor strategy statistics. A reverse iron condor consists of: - Short 1 put at lowest strike - Long 1 put at lower-middle strike - Long 1 call at upper-middle strike - Short 1 call at highest strike This strategy profits when the underlying makes a significant move in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with reverse iron condor strategy performance statistics","title":"reverse_iron_condor"},{"location":"api-reference/#iron_butterfly","text":"","title":"iron_butterfly"},{"location":"api-reference/#optopsy.strategies.iron_butterfly","text":"iron_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate iron butterfly strategy statistics. An iron butterfly consists of: - Long 1 put at lowest strike (wing) - Short 1 put at middle strike (body) - Short 1 call at middle strike (body) - same strike as short put - Long 1 call at highest strike (wing) This is a neutral income strategy with higher profit potential than an iron condor, but a narrower profit zone. Maximum profit occurs when the underlying is exactly at the middle strike at expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with iron butterfly strategy performance statistics","title":"iron_butterfly"},{"location":"api-reference/#reverse_iron_butterfly","text":"","title":"reverse_iron_butterfly"},{"location":"api-reference/#optopsy.strategies.reverse_iron_butterfly","text":"reverse_iron_butterfly ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate reverse iron butterfly strategy statistics. A reverse iron butterfly consists of: - Short 1 put at lowest strike (wing) - Long 1 put at middle strike (body) - Long 1 call at middle strike (body) - same strike as long put - Short 1 call at highest strike (wing) This strategy profits when the underlying makes a significant move away from the middle strike in either direction. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with reverse iron butterfly strategy performance statistics","title":"reverse_iron_butterfly"},{"location":"api-reference/#covered-strategies","text":"Note All covered strategies accept the same parameters. See Common Parameters for full documentation.","title":"Covered Strategies"},{"location":"api-reference/#covered_call","text":"","title":"covered_call"},{"location":"api-reference/#optopsy.strategies.covered_call","text":"covered_call ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate covered call strategy statistics. A covered call consists of: - Long underlying position (simulated via long deep ITM call) - Short 1 call at higher strike This is an income strategy that profits from time decay on the short call while maintaining upside exposure up to the short strike. The long deep ITM call acts as a synthetic long stock position. Note: This implementation uses a synthetic approach with options only. For true covered call analysis with actual stock positions, additional data integration would be required. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with covered call strategy performance statistics","title":"covered_call"},{"location":"api-reference/#protective_put","text":"","title":"protective_put"},{"location":"api-reference/#optopsy.strategies.protective_put","text":"protective_put ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate protective put (married put) strategy statistics. A protective put consists of: - Long underlying position (simulated via long deep ITM call) - Long 1 put at lower strike for protection This strategy provides downside protection while maintaining upside potential. The long deep ITM call acts as a synthetic long stock position. Note: This implementation uses a synthetic approach with options only. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with protective put strategy performance statistics","title":"protective_put"},{"location":"api-reference/#calendar-spreads","text":"Note Calendar spreads have additional timing parameters ( front_dte_min , front_dte_max , back_dte_min , back_dte_max ) in addition to common parameters. See Common Parameters and Calendar/Diagonal Parameters for full documentation.","title":"Calendar Spreads"},{"location":"api-reference/#long_call_calendar","text":"","title":"long_call_calendar"},{"location":"api-reference/#optopsy.strategies.long_call_calendar","text":"long_call_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call calendar spread strategy statistics. A long call calendar consists of: - Short 1 front-month call (near-term expiration) - Long 1 back-month call (longer-term expiration) - Both at the same strike This is a neutral strategy that profits from time decay differential between the two expirations. Maximum profit occurs when the underlying is at the strike price at front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters including: - front_dte_min: Minimum DTE for front leg (default: 20) - front_dte_max: Maximum DTE for front leg (default: 40) - back_dte_min: Minimum DTE for back leg (default: 50) - back_dte_max: Maximum DTE for back leg (default: 90) - exit_dte: Days before front expiration to exit (default: 7) {} Returns: Type Description DataFrame DataFrame with long call calendar spread strategy performance statistics","title":"long_call_calendar"},{"location":"api-reference/#short_call_calendar","text":"","title":"short_call_calendar"},{"location":"api-reference/#optopsy.strategies.short_call_calendar","text":"short_call_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call calendar spread strategy statistics. A short call calendar consists of: - Long 1 front-month call (near-term expiration) - Short 1 back-month call (longer-term expiration) - Both at the same strike This strategy profits when the underlying moves significantly away from the strike price before front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call calendar spread strategy performance statistics","title":"short_call_calendar"},{"location":"api-reference/#long_put_calendar","text":"","title":"long_put_calendar"},{"location":"api-reference/#optopsy.strategies.long_put_calendar","text":"long_put_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put calendar spread strategy statistics. A long put calendar consists of: - Short 1 front-month put (near-term expiration) - Long 1 back-month put (longer-term expiration) - Both at the same strike This is a neutral strategy that profits from time decay differential between the two expirations. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put calendar spread strategy performance statistics","title":"long_put_calendar"},{"location":"api-reference/#short_put_calendar","text":"","title":"short_put_calendar"},{"location":"api-reference/#optopsy.strategies.short_put_calendar","text":"short_put_calendar ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put calendar spread strategy statistics. A short put calendar consists of: - Long 1 front-month put (near-term expiration) - Short 1 back-month put (longer-term expiration) - Both at the same strike This strategy profits when the underlying moves significantly away from the strike price before front-month expiration. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put calendar spread strategy performance statistics","title":"short_put_calendar"},{"location":"api-reference/#diagonal-spreads","text":"Note Diagonal spreads have additional timing parameters ( front_dte_min , front_dte_max , back_dte_min , back_dte_max ) in addition to common parameters. See Common Parameters and Calendar/Diagonal Parameters for full documentation.","title":"Diagonal Spreads"},{"location":"api-reference/#long_call_diagonal","text":"","title":"long_call_diagonal"},{"location":"api-reference/#optopsy.strategies.long_call_diagonal","text":"long_call_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long call diagonal spread strategy statistics. A long call diagonal consists of: - Short 1 front-month call (near-term expiration) - Long 1 back-month call (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long call diagonal spread strategy performance statistics","title":"long_call_diagonal"},{"location":"api-reference/#short_call_diagonal","text":"","title":"short_call_diagonal"},{"location":"api-reference/#optopsy.strategies.short_call_diagonal","text":"short_call_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short call diagonal spread strategy statistics. A short call diagonal consists of: - Long 1 front-month call (near-term expiration) - Short 1 back-month call (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short call diagonal spread strategy performance statistics","title":"short_call_diagonal"},{"location":"api-reference/#long_put_diagonal","text":"","title":"long_put_diagonal"},{"location":"api-reference/#optopsy.strategies.long_put_diagonal","text":"long_put_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate long put diagonal spread strategy statistics. A long put diagonal consists of: - Short 1 front-month put (near-term expiration) - Long 1 back-month put (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with long put diagonal spread strategy performance statistics","title":"long_put_diagonal"},{"location":"api-reference/#short_put_diagonal","text":"","title":"short_put_diagonal"},{"location":"api-reference/#optopsy.strategies.short_put_diagonal","text":"short_put_diagonal ( data : DataFrame , ** kwargs : Unpack [ StrategyParams ] ) -> pd . DataFrame Generate short put diagonal spread strategy statistics. A short put diagonal consists of: - Long 1 front-month put (near-term expiration) - Short 1 back-month put (longer-term expiration) - Different strikes for each leg This strategy combines elements of a calendar spread and a vertical spread. All strike combinations are evaluated. Parameters: Name Type Description Default data DataFrame DataFrame containing option chain data required **kwargs Unpack [ StrategyParams ] Optional strategy parameters {} Returns: Type Description DataFrame DataFrame with short put diagonal spread strategy performance statistics","title":"short_put_diagonal"},{"location":"api-reference/#common-parameters","text":"All strategy functions accept these common parameters:","title":"Common Parameters"},{"location":"api-reference/#timing-parameters","text":"max_entry_dte (int, default=90): Maximum days to expiration at entry exit_dte (int, default=0): Days to expiration at exit dte_interval (int, default=7): Grouping interval for DTE ranges","title":"Timing Parameters"},{"location":"api-reference/#filtering-parameters","text":"max_otm_pct (float, default=0.5): Maximum out-of-the-money percentage otm_pct_interval (float, default=0.05): Grouping interval for OTM ranges min_bid_ask (float, default=0.05): Minimum bid-ask spread filter","title":"Filtering Parameters"},{"location":"api-reference/#greeks-parameters","text":"delta_min (float, optional): Minimum delta filter delta_max (float, optional): Maximum delta filter delta_interval (float, optional): Grouping interval for delta ranges","title":"Greeks Parameters"},{"location":"api-reference/#slippage-parameters","text":"slippage (str, default='mid'): Slippage mode - 'mid', 'spread', or 'liquidity' fill_ratio (float, default=0.5): Fill ratio for liquidity mode (0.0-1.0) reference_volume (int, default=1000): Volume threshold for liquid options","title":"Slippage Parameters"},{"location":"api-reference/#output-parameters","text":"raw (bool, default=False): Return raw trade data instead of aggregated stats drop_nan (bool, default=True): Drop rows with NaN values","title":"Output Parameters"},{"location":"api-reference/#calendardiagonal-parameters","text":"These strategies have additional timing parameters: front_dte_min (int, default=20): Minimum DTE for front leg front_dte_max (int, default=40): Maximum DTE for front leg back_dte_min (int, default=50): Minimum DTE for back leg back_dte_max (int, default=90): Maximum DTE for back leg","title":"Calendar/Diagonal Parameters"},{"location":"api-reference/#return-values","text":"","title":"Return Values"},{"location":"api-reference/#aggregated-results-default","text":"When raw=False (default), strategies return aggregated statistics: Columns: - dte_range : DTE interval group - otm_pct_range : OTM percentage interval group - count : Number of trades in group - mean : Mean return - std : Standard deviation of returns - min : Minimum return - 25% : 25th percentile - 50% : Median return - 75% : 75th percentile - max : Maximum return","title":"Aggregated Results (default)"},{"location":"api-reference/#raw-trade-data","text":"When raw=True , strategies return individual trade details: Columns (vary by strategy): - underlying_symbol : Ticker symbol - expiration : Option expiration date - dte_entry : Days to expiration at entry - strike / strike_leg1 , strike_leg2 , etc.: Strike prices - entry : Entry price/cost - exit : Exit price/proceeds - pct_change : Percentage return - Additional strategy-specific columns","title":"Raw Trade Data"},{"location":"api-reference/#examples","text":"See the Examples page for detailed usage examples.","title":"Examples"},{"location":"api-reference/#type-hints","text":"All functions include full type hints with TypedDict for IDE autocomplete support: from typing import Unpack import pandas as pd from optopsy import StrategyParams def long_calls ( data : pd . DataFrame , ** kwargs : Unpack [ StrategyParams ]) -> pd . DataFrame : ...","title":"Type Hints"},{"location":"api-reference/#using-type-hints","text":"Import StrategyParams or CalendarStrategyParams for better IDE support: import optopsy as op from optopsy import StrategyParams # Your IDE will now provide autocomplete for all parameters results = op . iron_condor ( data , max_entry_dte = 45 , # Type: int exit_dte = 21 , # Type: int slippage = 'liquidity' , # Type: Literal['mid', 'spread', 'liquidity'] fill_ratio = 0.5 , # Type: float ) See TYPE_HINTS.md for detailed documentation on using type hints with Optopsy.","title":"Using Type Hints"},{"location":"contributing/","text":"Contributing to Optopsy \u00b6 Thank you for your interest in contributing to Optopsy! This guide will help you get started. Development Setup \u00b6 1. Clone the Repository \u00b6 git clone https://github.com/michaelchu/optopsy.git cd optopsy 2. Create Virtual Environment \u00b6 python -m venv venv source venv/bin/activate # On Windows: venv\\Scripts\\activate 3. Install Development Dependencies \u00b6 pip install -e . pip install pytest black 4. Verify Installation \u00b6 pytest tests/ -v Development Workflow \u00b6 Running Tests \u00b6 # Run all tests pytest tests/ -v # Run specific test file pytest tests/test_strategies.py -v # Run tests matching a pattern pytest tests/ -k \"butterfly\" -v Code Formatting \u00b6 Optopsy uses Black for code formatting: # Check formatting black --check optopsy/ tests/ setup.py # Auto-format code black optopsy/ tests/ setup.py Important: All code must be formatted with Black before submitting a PR. Adding a New Strategy \u00b6 Follow these steps to add a new options strategy: 1. Define Strategy in strategies.py \u00b6 Add a public function and helper if needed: def new_strategy ( data : pd . DataFrame , ** kwargs : Any ) -> pd . DataFrame : \"\"\" Generate new strategy statistics. A clear description of what this strategy does, including: - Leg composition - Market outlook - Profit/loss characteristics Args: data: DataFrame containing option chain data **kwargs: Optional strategy parameters Returns: DataFrame with strategy performance statistics \"\"\" return _helper ( data , leg_def = [ ... ], ** kwargs ) 2. Add Validation Rules (if needed) \u00b6 If your strategy has strike constraints, add them to rules.py : def _rule_new_strategy_strikes ( df : pd . DataFrame ) -> pd . DataFrame : \"\"\" Validate strike ordering for new strategy. Rule: [Describe your rule here] \"\"\" # Implementation return df [ mask ] 3. Update Column Definitions (if needed) \u00b6 If your strategy needs new column structures, add them to definitions.py : new_strategy_internal_cols : List [ str ] = [ \"underlying_symbol\" , \"strike_leg1\" , # ... other columns ] 4. Export in __init__.py \u00b6 Add your strategy to the exports: from .strategies import ( # ... existing strategies new_strategy , ) __all__ = [ # ... existing strategies \"new_strategy\" , ] 5. Add Tests \u00b6 Create tests in tests/test_strategies.py : def test_new_strategy ( sample_data ): \"\"\"Test new strategy returns expected output.\"\"\" results = op . new_strategy ( sample_data ) assert isinstance ( results , pd . DataFrame ) assert len ( results ) > 0 assert 'mean' in results . columns # Additional assertions 6. Update Documentation \u00b6 Add documentation to the appropriate strategy category file in docs/strategies/ . Pull Request Guidelines \u00b6 Before Submitting \u00b6 [ ] All tests pass ( pytest tests/ -v ) [ ] Code is formatted with Black ( black optopsy/ tests/ ) [ ] New features have tests [ ] New strategies have documentation [ ] Docstrings follow existing style (Google format) [ ] Type hints are included PR Description \u00b6 Include in your PR description: - What changes you made - Why you made them - How to test the changes - Any breaking changes Example PR Template \u00b6 ## Description Brief description of changes ## Type of Change - [ ] Bug fix - [ ] New feature - [ ] Breaking change - [ ] Documentation update ## Testing How to test these changes ## Checklist - [ ] Tests pass - [ ] Code formatted with Black - [ ] Documentation updated - [ ] Type hints included Code Style Guidelines \u00b6 Docstrings \u00b6 Use Google-style docstrings: def function_name ( param1 : str , param2 : int ) -> bool : \"\"\" Brief description of function. Longer description if needed, explaining behavior, edge cases, or important details. Args: param1: Description of param1 param2: Description of param2 Returns: Description of return value Raises: ValueError: When param1 is invalid \"\"\" pass Type Hints \u00b6 Always include type hints: from typing import Any , Dict , List import pandas as pd def process_data ( data : pd . DataFrame , params : Dict [ str , Any ] ) -> List [ pd . DataFrame ]: ... Function Naming \u00b6 Public functions: snake_case (e.g., long_calls ) Private functions: _snake_case (e.g., _process_strategy ) Constants: UPPER_CASE (rarely used) Testing Guidelines \u00b6 Test Structure \u00b6 def test_feature_name ( sample_data ): \"\"\"Test that feature behaves correctly.\"\"\" # Arrange expected_result = ... # Act actual_result = function_under_test ( sample_data ) # Assert assert actual_result == expected_result Fixtures \u00b6 Use pytest fixtures for common test data: @pytest . fixture def sample_data (): \"\"\"Generate sample options data for testing.\"\"\" return pd . DataFrame ({ ... }) Coverage \u00b6 Aim for high test coverage on public APIs. Not every internal function needs tests, but all public strategy functions should be tested. Documentation \u00b6 Building Docs Locally \u00b6 # Install MkDocs pip install mkdocs mkdocs-material mkdocstrings [ python ] # Serve docs locally mkdocs serve # Visit http://127.0.0.1:8000 Documentation Structure \u00b6 docs/index.md - Home page docs/getting-started.md - Installation and quick start docs/strategies/ - Strategy-specific documentation docs/parameters.md - Parameter reference docs/examples.md - Usage examples docs/api-reference.md - Auto-generated API docs Reporting Issues \u00b6 Bug Reports \u00b6 Include: - Python version - Optopsy version - Minimal reproducible example - Expected vs actual behavior - Error messages/tracebacks Feature Requests \u00b6 Describe: - The problem you're trying to solve - How you envision the solution - Any alternatives you've considered - Whether you're willing to contribute the feature Community \u00b6 GitHub Issues : Bug reports and feature requests Discussions : Questions and general discussion Pull Requests : Code contributions License \u00b6 By contributing to Optopsy, you agree that your contributions will be licensed under the GPL-3.0 License. Questions? \u00b6 If you have questions about contributing, feel free to: - Open a GitHub Discussion - Create an issue with the \"question\" label - Check existing issues and documentation Thank you for contributing to Optopsy! \ud83c\udf89","title":"Contributing to Optopsy"},{"location":"contributing/#contributing-to-optopsy","text":"Thank you for your interest in contributing to Optopsy! This guide will help you get started.","title":"Contributing to Optopsy"},{"location":"contributing/#development-setup","text":"","title":"Development Setup"},{"location":"contributing/#1-clone-the-repository","text":"git clone https://github.com/michaelchu/optopsy.git cd optopsy","title":"1. Clone the Repository"},{"location":"contributing/#2-create-virtual-environment","text":"python -m venv venv source venv/bin/activate # On Windows: venv\\Scripts\\activate","title":"2. Create Virtual Environment"},{"location":"contributing/#3-install-development-dependencies","text":"pip install -e . pip install pytest black","title":"3. Install Development Dependencies"},{"location":"contributing/#4-verify-installation","text":"pytest tests/ -v","title":"4. Verify Installation"},{"location":"contributing/#development-workflow","text":"","title":"Development Workflow"},{"location":"contributing/#running-tests","text":"# Run all tests pytest tests/ -v # Run specific test file pytest tests/test_strategies.py -v # Run tests matching a pattern pytest tests/ -k \"butterfly\" -v","title":"Running Tests"},{"location":"contributing/#code-formatting","text":"Optopsy uses Black for code formatting: # Check formatting black --check optopsy/ tests/ setup.py # Auto-format code black optopsy/ tests/ setup.py Important: All code must be formatted with Black before submitting a PR.","title":"Code Formatting"},{"location":"contributing/#adding-a-new-strategy","text":"Follow these steps to add a new options strategy:","title":"Adding a New Strategy"},{"location":"contributing/#1-define-strategy-in-strategiespy","text":"Add a public function and helper if needed: def new_strategy ( data : pd . DataFrame , ** kwargs : Any ) -> pd . DataFrame : \"\"\" Generate new strategy statistics. A clear description of what this strategy does, including: - Leg composition - Market outlook - Profit/loss characteristics Args: data: DataFrame containing option chain data **kwargs: Optional strategy parameters Returns: DataFrame with strategy performance statistics \"\"\" return _helper ( data , leg_def = [ ... ], ** kwargs )","title":"1. Define Strategy in strategies.py"},{"location":"contributing/#2-add-validation-rules-if-needed","text":"If your strategy has strike constraints, add them to rules.py : def _rule_new_strategy_strikes ( df : pd . DataFrame ) -> pd . DataFrame : \"\"\" Validate strike ordering for new strategy. Rule: [Describe your rule here] \"\"\" # Implementation return df [ mask ]","title":"2. Add Validation Rules (if needed)"},{"location":"contributing/#3-update-column-definitions-if-needed","text":"If your strategy needs new column structures, add them to definitions.py : new_strategy_internal_cols : List [ str ] = [ \"underlying_symbol\" , \"strike_leg1\" , # ... other columns ]","title":"3. Update Column Definitions (if needed)"},{"location":"contributing/#4-export-in-__init__py","text":"Add your strategy to the exports: from .strategies import ( # ... existing strategies new_strategy , ) __all__ = [ # ... existing strategies \"new_strategy\" , ]","title":"4. Export in __init__.py"},{"location":"contributing/#5-add-tests","text":"Create tests in tests/test_strategies.py : def test_new_strategy ( sample_data ): \"\"\"Test new strategy returns expected output.\"\"\" results = op . new_strategy ( sample_data ) assert isinstance ( results , pd . DataFrame ) assert len ( results ) > 0 assert 'mean' in results . columns # Additional assertions","title":"5. Add Tests"},{"location":"contributing/#6-update-documentation","text":"Add documentation to the appropriate strategy category file in docs/strategies/ .","title":"6. Update Documentation"},{"location":"contributing/#pull-request-guidelines","text":"","title":"Pull Request Guidelines"},{"location":"contributing/#before-submitting","text":"[ ] All tests pass ( pytest tests/ -v ) [ ] Code is formatted with Black ( black optopsy/ tests/ ) [ ] New features have tests [ ] New strategies have documentation [ ] Docstrings follow existing style (Google format) [ ] Type hints are included","title":"Before Submitting"},{"location":"contributing/#pr-description","text":"Include in your PR description: - What changes you made - Why you made them - How to test the changes - Any breaking changes","title":"PR Description"},{"location":"contributing/#example-pr-template","text":"## Description Brief description of changes ## Type of Change - [ ] Bug fix - [ ] New feature - [ ] Breaking change - [ ] Documentation update ## Testing How to test these changes ## Checklist - [ ] Tests pass - [ ] Code formatted with Black - [ ] Documentation updated - [ ] Type hints included","title":"Example PR Template"},{"location":"contributing/#code-style-guidelines","text":"","title":"Code Style Guidelines"},{"location":"contributing/#docstrings","text":"Use Google-style docstrings: def function_name ( param1 : str , param2 : int ) -> bool : \"\"\" Brief description of function. Longer description if needed, explaining behavior, edge cases, or important details. Args: param1: Description of param1 param2: Description of param2 Returns: Description of return value Raises: ValueError: When param1 is invalid \"\"\" pass","title":"Docstrings"},{"location":"contributing/#type-hints","text":"Always include type hints: from typing import Any , Dict , List import pandas as pd def process_data ( data : pd . DataFrame , params : Dict [ str , Any ] ) -> List [ pd . DataFrame ]: ...","title":"Type Hints"},{"location":"contributing/#function-naming","text":"Public functions: snake_case (e.g., long_calls ) Private functions: _snake_case (e.g., _process_strategy ) Constants: UPPER_CASE (rarely used)","title":"Function Naming"},{"location":"contributing/#testing-guidelines","text":"","title":"Testing Guidelines"},{"location":"contributing/#test-structure","text":"def test_feature_name ( sample_data ): \"\"\"Test that feature behaves correctly.\"\"\" # Arrange expected_result = ... # Act actual_result = function_under_test ( sample_data ) # Assert assert actual_result == expected_result","title":"Test Structure"},{"location":"contributing/#fixtures","text":"Use pytest fixtures for common test data: @pytest . fixture def sample_data (): \"\"\"Generate sample options data for testing.\"\"\" return pd . DataFrame ({ ... })","title":"Fixtures"},{"location":"contributing/#coverage","text":"Aim for high test coverage on public APIs. Not every internal function needs tests, but all public strategy functions should be tested.","title":"Coverage"},{"location":"contributing/#documentation","text":"","title":"Documentation"},{"location":"contributing/#building-docs-locally","text":"# Install MkDocs pip install mkdocs mkdocs-material mkdocstrings [ python ] # Serve docs locally mkdocs serve # Visit http://127.0.0.1:8000","title":"Building Docs Locally"},{"location":"contributing/#documentation-structure","text":"docs/index.md - Home page docs/getting-started.md - Installation and quick start docs/strategies/ - Strategy-specific documentation docs/parameters.md - Parameter reference docs/examples.md - Usage examples docs/api-reference.md - Auto-generated API docs","title":"Documentation Structure"},{"location":"contributing/#reporting-issues","text":"","title":"Reporting Issues"},{"location":"contributing/#bug-reports","text":"Include: - Python version - Optopsy version - Minimal reproducible example - Expected vs actual behavior - Error messages/tracebacks","title":"Bug Reports"},{"location":"contributing/#feature-requests","text":"Describe: - The problem you're trying to solve - How you envision the solution - Any alternatives you've considered - Whether you're willing to contribute the feature","title":"Feature Requests"},{"location":"contributing/#community","text":"GitHub Issues : Bug reports and feature requests Discussions : Questions and general discussion Pull Requests : Code contributions","title":"Community"},{"location":"contributing/#license","text":"By contributing to Optopsy, you agree that your contributions will be licensed under the GPL-3.0 License.","title":"License"},{"location":"contributing/#questions","text":"If you have questions about contributing, feel free to: - Open a GitHub Discussion - Create an issue with the \"question\" label - Check existing issues and documentation Thank you for contributing to Optopsy! \ud83c\udf89","title":"Questions?"},{"location":"examples/","text":"Examples \u00b6 This page provides real-world examples of using Optopsy for options backtesting. Basic Examples \u00b6 Simple Long Calls Backtest \u00b6 import optopsy as op # Load data data = op . csv_data ( 'SPX_2023.csv' ) # Backtest long calls results = op . long_calls ( data ) print ( results . head ()) Iron Condor with Custom Parameters \u00b6 results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 , min_bid_ask = 0.10 ) # Filter for best performing DTE ranges best_dte = results [ results [ 'mean' ] > 0.20 ] print ( best_dte ) Advanced Examples \u00b6 Delta-Neutral Iron Condors \u00b6 Target specific delta ranges for short strikes: results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , delta_min = 0.15 , # Target 15-20 delta delta_max = 0.20 , delta_interval = 0.05 , min_bid_ask = 0.10 ) # Analyze by delta ranges print ( results . groupby ( 'delta_range' )[ 'mean' ] . describe ()) Earnings Straddle Strategy \u00b6 Backtest long straddles around earnings events: # Load earnings dates earnings_dates = [ '2023-01-15' , '2023-04-15' , '2023-07-15' , '2023-10-15' ] # Filter data around earnings (\u00b17 days) import pandas as pd data [ 'quote_date' ] = pd . to_datetime ( data [ 'quote_date' ]) earnings_data = [] for date in pd . to_datetime ( earnings_dates ): mask = ( data [ 'quote_date' ] >= date - pd . Timedelta ( days = 7 )) & \\ ( data [ 'quote_date' ] <= date + pd . Timedelta ( days = 7 )) earnings_data . append ( data [ mask ]) earnings_df = pd . concat ( earnings_data ) # Backtest straddles results = op . long_straddles ( earnings_df , max_entry_dte = 7 , # Enter 1 week before exit_dte = 0 , # Hold through earnings max_otm_pct = 0.05 # ATM straddles ) print ( results ) Time Decay Analysis \u00b6 Compare different exit times for short strangles: exit_times = [ 0 , 7 , 14 , 21 , 30 ] results_by_exit = {} for exit_dte in exit_times : results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = exit_dte , max_otm_pct = 0.30 ) results_by_exit [ exit_dte ] = results [ 'mean' ] . mean () # Plot results import matplotlib.pyplot as plt plt . bar ( exit_times , results_by_exit . values ()) plt . xlabel ( 'Exit DTE' ) plt . ylabel ( 'Mean Return' ) plt . title ( 'Short Strangle Returns by Exit Time' ) plt . show () Slippage Comparison \u00b6 Compare different slippage models: slippage_modes = [ 'mid' , 'spread' , 'liquidity' ] results_comparison = {} for mode in slippage_modes : results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , slippage = mode , fill_ratio = 0.5 , reference_volume = 1000 ) results_comparison [ mode ] = results [ 'mean' ] . mean () print ( \"Slippage Model Comparison:\" ) for mode , avg_return in results_comparison . items (): print ( f \" { mode } : { avg_return : .2% } \" ) Data Analysis Examples \u00b6 Raw Trade Data Analysis \u00b6 Get individual trades for custom analysis: # Get raw trade data trades = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , raw = True # Return individual trades ) # Custom analysis import pandas as pd # Win rate win_rate = ( trades [ 'pct_change' ] > 0 ) . mean () print ( f \"Win Rate: { win_rate : .1% } \" ) # Average winner vs loser avg_winner = trades [ trades [ 'pct_change' ] > 0 ][ 'pct_change' ] . mean () avg_loser = trades [ trades [ 'pct_change' ] < 0 ][ 'pct_change' ] . mean () print ( f \"Avg Winner: { avg_winner : .2% } \" ) print ( f \"Avg Loser: { avg_loser : .2% } \" ) # Profit factor total_profit = trades [ trades [ 'pct_change' ] > 0 ][ 'pct_change' ] . sum () total_loss = abs ( trades [ trades [ 'pct_change' ] < 0 ][ 'pct_change' ] . sum ()) profit_factor = total_profit / total_loss if total_loss > 0 else float ( 'inf' ) print ( f \"Profit Factor: { profit_factor : .2f } \" ) Monthly Performance \u00b6 Analyze strategy performance by month: trades = op . short_puts ( data , raw = True ) # Convert to datetime trades [ 'entry_date' ] = pd . to_datetime ( trades [ 'quote_date' ]) trades [ 'month' ] = trades [ 'entry_date' ] . dt . to_period ( 'M' ) # Group by month monthly_perf = trades . groupby ( 'month' ) . agg ({ 'pct_change' : [ 'count' , 'mean' , 'std' , 'sum' ] }) print ( monthly_perf ) Strike Selection Analysis \u00b6 Analyze performance by OTM percentage: results = op . short_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.50 , otm_pct_interval = 0.05 ) # Find optimal OTM range optimal = results . loc [ results [ 'mean' ] . idxmax ()] print ( f \"Optimal OTM Range: { optimal [ 'otm_pct_range' ] } \" ) print ( f \"Mean Return: { optimal [ 'mean' ] : .2% } \" ) print ( f \"Count: { optimal [ 'count' ] : .0f } \" ) Multi-Strategy Comparison \u00b6 Compare multiple strategies: strategies = { 'Long Calls' : op . long_calls , 'Short Puts' : op . short_puts , 'Iron Condor' : op . iron_condor , 'Long Straddle' : op . long_straddles } comparison = {} for name , strategy_func in strategies . items (): results = strategy_func ( data , max_entry_dte = 45 , exit_dte = 21 ) comparison [ name ] = { 'mean' : results [ 'mean' ] . mean (), 'std' : results [ 'std' ] . mean (), 'max' : results [ 'max' ] . max (), 'min' : results [ 'min' ] . min () } # Display comparison df_comparison = pd . DataFrame ( comparison ) . T print ( df_comparison ) Portfolio Simulation \u00b6 Simulate a portfolio of multiple strategies: # Define portfolio allocation portfolio = { 'iron_condor' : 0.50 , 'short_strangles' : 0.30 , 'long_call_spread' : 0.20 } # Get raw trades for each strategy trades = {} trades [ 'iron_condor' ] = op . iron_condor ( data , raw = True ) trades [ 'short_strangles' ] = op . short_strangles ( data , raw = True ) trades [ 'long_call_spread' ] = op . long_call_spread ( data , raw = True ) # Weight returns by allocation for strategy , weight in portfolio . items (): trades [ strategy ][ 'weighted_return' ] = trades [ strategy ][ 'pct_change' ] * weight # Combine all trades all_trades = pd . concat ([ trades [ s ][[ 'quote_date' , 'weighted_return' ]] for s in portfolio . keys () ]) # Aggregate by date portfolio_returns = all_trades . groupby ( 'quote_date' )[ 'weighted_return' ] . sum () print ( f \"Portfolio Mean Return: { portfolio_returns . mean () : .2% } \" ) print ( f \"Portfolio Std Dev: { portfolio_returns . std () : .2% } \" ) print ( f \"Sharpe Ratio (annualized): { ( portfolio_returns . mean () / portfolio_returns . std ()) * ( 252 ** 0.5 ) : .2f } \" ) Performance Metrics \u00b6 Calculate comprehensive performance statistics: def calculate_metrics ( trades_df ): \"\"\"Calculate performance metrics for a strategy.\"\"\" returns = trades_df [ 'pct_change' ] metrics = { 'Total Trades' : len ( returns ), 'Win Rate' : ( returns > 0 ) . mean (), 'Mean Return' : returns . mean (), 'Median Return' : returns . median (), 'Std Dev' : returns . std (), 'Max Win' : returns . max (), 'Max Loss' : returns . min (), 'Profit Factor' : returns [ returns > 0 ] . sum () / abs ( returns [ returns < 0 ] . sum ()), 'Sharpe Ratio' : returns . mean () / returns . std () if returns . std () > 0 else 0 } return pd . Series ( metrics ) # Apply to strategy trades = op . iron_condor ( data , raw = True ) metrics = calculate_metrics ( trades ) print ( metrics ) Working with Different Data Sources \u00b6 Historical Options Data Providers \u00b6 # Example: Loading from different CSV formats # Format 1: CBOE data export data = op . csv_data ( 'cboe_spx.csv' , underlying_symbol = 'underlying_symbol' , underlying_price = 'underlying_bid_1545' , option_type = 'option_type' , expiration = 'expiration' , quote_date = 'quote_date' , strike = 'strike' , bid = 'bid' , ask = 'ask' ) # Format 2: Indexed columns data = op . csv_data ( 'provider_data.csv' , underlying_symbol = 0 , underlying_price = 1 , option_type = 2 , expiration = 3 , quote_date = 4 , strike = 5 , bid = 6 , ask = 7 ) Best Practices \u00b6 1. Always Use Filters \u00b6 # Bad: No filtering results = op . iron_condor ( data ) # Good: Filtered for quality results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , min_bid_ask = 0.10 , # Ensure liquidity max_otm_pct = 0.30 ) 2. Compare Apples to Apples \u00b6 # Use same parameters when comparing strategies params = { 'max_entry_dte' : 45 , 'exit_dte' : 21 , 'max_otm_pct' : 0.25 } ic_results = op . iron_condor ( data , ** params ) strangle_results = op . short_strangles ( data , ** params ) 3. Realistic Slippage \u00b6 # Use liquidity mode for realistic results results = op . iron_condor ( data , slippage = 'liquidity' , fill_ratio = 0.5 , reference_volume = 1000 ) Next Steps \u00b6 Review Strategy documentation for specific strategy details Check Parameters for all configuration options See API Reference for function signatures Explore the samples/ directory in the repository for more examples","title":"Examples"},{"location":"examples/#examples","text":"This page provides real-world examples of using Optopsy for options backtesting.","title":"Examples"},{"location":"examples/#basic-examples","text":"","title":"Basic Examples"},{"location":"examples/#simple-long-calls-backtest","text":"import optopsy as op # Load data data = op . csv_data ( 'SPX_2023.csv' ) # Backtest long calls results = op . long_calls ( data ) print ( results . head ())","title":"Simple Long Calls Backtest"},{"location":"examples/#iron-condor-with-custom-parameters","text":"results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 , min_bid_ask = 0.10 ) # Filter for best performing DTE ranges best_dte = results [ results [ 'mean' ] > 0.20 ] print ( best_dte )","title":"Iron Condor with Custom Parameters"},{"location":"examples/#advanced-examples","text":"","title":"Advanced Examples"},{"location":"examples/#delta-neutral-iron-condors","text":"Target specific delta ranges for short strikes: results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , delta_min = 0.15 , # Target 15-20 delta delta_max = 0.20 , delta_interval = 0.05 , min_bid_ask = 0.10 ) # Analyze by delta ranges print ( results . groupby ( 'delta_range' )[ 'mean' ] . describe ())","title":"Delta-Neutral Iron Condors"},{"location":"examples/#earnings-straddle-strategy","text":"Backtest long straddles around earnings events: # Load earnings dates earnings_dates = [ '2023-01-15' , '2023-04-15' , '2023-07-15' , '2023-10-15' ] # Filter data around earnings (\u00b17 days) import pandas as pd data [ 'quote_date' ] = pd . to_datetime ( data [ 'quote_date' ]) earnings_data = [] for date in pd . to_datetime ( earnings_dates ): mask = ( data [ 'quote_date' ] >= date - pd . Timedelta ( days = 7 )) & \\ ( data [ 'quote_date' ] <= date + pd . Timedelta ( days = 7 )) earnings_data . append ( data [ mask ]) earnings_df = pd . concat ( earnings_data ) # Backtest straddles results = op . long_straddles ( earnings_df , max_entry_dte = 7 , # Enter 1 week before exit_dte = 0 , # Hold through earnings max_otm_pct = 0.05 # ATM straddles ) print ( results )","title":"Earnings Straddle Strategy"},{"location":"examples/#time-decay-analysis","text":"Compare different exit times for short strangles: exit_times = [ 0 , 7 , 14 , 21 , 30 ] results_by_exit = {} for exit_dte in exit_times : results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = exit_dte , max_otm_pct = 0.30 ) results_by_exit [ exit_dte ] = results [ 'mean' ] . mean () # Plot results import matplotlib.pyplot as plt plt . bar ( exit_times , results_by_exit . values ()) plt . xlabel ( 'Exit DTE' ) plt . ylabel ( 'Mean Return' ) plt . title ( 'Short Strangle Returns by Exit Time' ) plt . show ()","title":"Time Decay Analysis"},{"location":"examples/#slippage-comparison","text":"Compare different slippage models: slippage_modes = [ 'mid' , 'spread' , 'liquidity' ] results_comparison = {} for mode in slippage_modes : results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , slippage = mode , fill_ratio = 0.5 , reference_volume = 1000 ) results_comparison [ mode ] = results [ 'mean' ] . mean () print ( \"Slippage Model Comparison:\" ) for mode , avg_return in results_comparison . items (): print ( f \" { mode } : { avg_return : .2% } \" )","title":"Slippage Comparison"},{"location":"examples/#data-analysis-examples","text":"","title":"Data Analysis Examples"},{"location":"examples/#raw-trade-data-analysis","text":"Get individual trades for custom analysis: # Get raw trade data trades = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , raw = True # Return individual trades ) # Custom analysis import pandas as pd # Win rate win_rate = ( trades [ 'pct_change' ] > 0 ) . mean () print ( f \"Win Rate: { win_rate : .1% } \" ) # Average winner vs loser avg_winner = trades [ trades [ 'pct_change' ] > 0 ][ 'pct_change' ] . mean () avg_loser = trades [ trades [ 'pct_change' ] < 0 ][ 'pct_change' ] . mean () print ( f \"Avg Winner: { avg_winner : .2% } \" ) print ( f \"Avg Loser: { avg_loser : .2% } \" ) # Profit factor total_profit = trades [ trades [ 'pct_change' ] > 0 ][ 'pct_change' ] . sum () total_loss = abs ( trades [ trades [ 'pct_change' ] < 0 ][ 'pct_change' ] . sum ()) profit_factor = total_profit / total_loss if total_loss > 0 else float ( 'inf' ) print ( f \"Profit Factor: { profit_factor : .2f } \" )","title":"Raw Trade Data Analysis"},{"location":"examples/#monthly-performance","text":"Analyze strategy performance by month: trades = op . short_puts ( data , raw = True ) # Convert to datetime trades [ 'entry_date' ] = pd . to_datetime ( trades [ 'quote_date' ]) trades [ 'month' ] = trades [ 'entry_date' ] . dt . to_period ( 'M' ) # Group by month monthly_perf = trades . groupby ( 'month' ) . agg ({ 'pct_change' : [ 'count' , 'mean' , 'std' , 'sum' ] }) print ( monthly_perf )","title":"Monthly Performance"},{"location":"examples/#strike-selection-analysis","text":"Analyze performance by OTM percentage: results = op . short_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.50 , otm_pct_interval = 0.05 ) # Find optimal OTM range optimal = results . loc [ results [ 'mean' ] . idxmax ()] print ( f \"Optimal OTM Range: { optimal [ 'otm_pct_range' ] } \" ) print ( f \"Mean Return: { optimal [ 'mean' ] : .2% } \" ) print ( f \"Count: { optimal [ 'count' ] : .0f } \" )","title":"Strike Selection Analysis"},{"location":"examples/#multi-strategy-comparison","text":"Compare multiple strategies: strategies = { 'Long Calls' : op . long_calls , 'Short Puts' : op . short_puts , 'Iron Condor' : op . iron_condor , 'Long Straddle' : op . long_straddles } comparison = {} for name , strategy_func in strategies . items (): results = strategy_func ( data , max_entry_dte = 45 , exit_dte = 21 ) comparison [ name ] = { 'mean' : results [ 'mean' ] . mean (), 'std' : results [ 'std' ] . mean (), 'max' : results [ 'max' ] . max (), 'min' : results [ 'min' ] . min () } # Display comparison df_comparison = pd . DataFrame ( comparison ) . T print ( df_comparison )","title":"Multi-Strategy Comparison"},{"location":"examples/#portfolio-simulation","text":"Simulate a portfolio of multiple strategies: # Define portfolio allocation portfolio = { 'iron_condor' : 0.50 , 'short_strangles' : 0.30 , 'long_call_spread' : 0.20 } # Get raw trades for each strategy trades = {} trades [ 'iron_condor' ] = op . iron_condor ( data , raw = True ) trades [ 'short_strangles' ] = op . short_strangles ( data , raw = True ) trades [ 'long_call_spread' ] = op . long_call_spread ( data , raw = True ) # Weight returns by allocation for strategy , weight in portfolio . items (): trades [ strategy ][ 'weighted_return' ] = trades [ strategy ][ 'pct_change' ] * weight # Combine all trades all_trades = pd . concat ([ trades [ s ][[ 'quote_date' , 'weighted_return' ]] for s in portfolio . keys () ]) # Aggregate by date portfolio_returns = all_trades . groupby ( 'quote_date' )[ 'weighted_return' ] . sum () print ( f \"Portfolio Mean Return: { portfolio_returns . mean () : .2% } \" ) print ( f \"Portfolio Std Dev: { portfolio_returns . std () : .2% } \" ) print ( f \"Sharpe Ratio (annualized): { ( portfolio_returns . mean () / portfolio_returns . std ()) * ( 252 ** 0.5 ) : .2f } \" )","title":"Portfolio Simulation"},{"location":"examples/#performance-metrics","text":"Calculate comprehensive performance statistics: def calculate_metrics ( trades_df ): \"\"\"Calculate performance metrics for a strategy.\"\"\" returns = trades_df [ 'pct_change' ] metrics = { 'Total Trades' : len ( returns ), 'Win Rate' : ( returns > 0 ) . mean (), 'Mean Return' : returns . mean (), 'Median Return' : returns . median (), 'Std Dev' : returns . std (), 'Max Win' : returns . max (), 'Max Loss' : returns . min (), 'Profit Factor' : returns [ returns > 0 ] . sum () / abs ( returns [ returns < 0 ] . sum ()), 'Sharpe Ratio' : returns . mean () / returns . std () if returns . std () > 0 else 0 } return pd . Series ( metrics ) # Apply to strategy trades = op . iron_condor ( data , raw = True ) metrics = calculate_metrics ( trades ) print ( metrics )","title":"Performance Metrics"},{"location":"examples/#working-with-different-data-sources","text":"","title":"Working with Different Data Sources"},{"location":"examples/#historical-options-data-providers","text":"# Example: Loading from different CSV formats # Format 1: CBOE data export data = op . csv_data ( 'cboe_spx.csv' , underlying_symbol = 'underlying_symbol' , underlying_price = 'underlying_bid_1545' , option_type = 'option_type' , expiration = 'expiration' , quote_date = 'quote_date' , strike = 'strike' , bid = 'bid' , ask = 'ask' ) # Format 2: Indexed columns data = op . csv_data ( 'provider_data.csv' , underlying_symbol = 0 , underlying_price = 1 , option_type = 2 , expiration = 3 , quote_date = 4 , strike = 5 , bid = 6 , ask = 7 )","title":"Historical Options Data Providers"},{"location":"examples/#best-practices","text":"","title":"Best Practices"},{"location":"examples/#1-always-use-filters","text":"# Bad: No filtering results = op . iron_condor ( data ) # Good: Filtered for quality results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , min_bid_ask = 0.10 , # Ensure liquidity max_otm_pct = 0.30 )","title":"1. Always Use Filters"},{"location":"examples/#2-compare-apples-to-apples","text":"# Use same parameters when comparing strategies params = { 'max_entry_dte' : 45 , 'exit_dte' : 21 , 'max_otm_pct' : 0.25 } ic_results = op . iron_condor ( data , ** params ) strangle_results = op . short_strangles ( data , ** params )","title":"2. Compare Apples to Apples"},{"location":"examples/#3-realistic-slippage","text":"# Use liquidity mode for realistic results results = op . iron_condor ( data , slippage = 'liquidity' , fill_ratio = 0.5 , reference_volume = 1000 )","title":"3. Realistic Slippage"},{"location":"examples/#next-steps","text":"Review Strategy documentation for specific strategy details Check Parameters for all configuration options See API Reference for function signatures Explore the samples/ directory in the repository for more examples","title":"Next Steps"},{"location":"getting-started/","text":"Getting Started \u00b6 This guide will walk you through setting up Optopsy and running your first backtest. Installation \u00b6 Install Optopsy using pip: pip install optopsy Requirements \u00b6 Python 3.8 or higher Pandas 2.0 or higher NumPy 1.26 or higher Data Format \u00b6 Optopsy requires historical options chain data with the following columns: Column Description Example underlying_symbol Ticker symbol SPX, SPY, QQQ underlying_price Stock/index price 4500.00 option_type Call or Put 'c', 'p', 'call', 'put' expiration Option expiration date 2023-01-20 quote_date Date of the quote 2023-01-01 strike Strike price 4500 bid Bid price 10.50 ask Ask price 11.00 Optional Columns for Greeks Filtering \u00b6 Column Description delta Option delta gamma Option gamma theta Option theta vega Option vega volume Trading volume open_interest Open interest Loading Data \u00b6 From CSV \u00b6 Use csv_data() to load options data from a CSV file: import optopsy as op data = op . csv_data ( 'options_data.csv' , underlying_symbol = 0 , # Column index or name underlying_price = 1 , option_type = 2 , expiration = 3 , quote_date = 4 , strike = 5 , bid = 6 , ask = 7 ) The function accepts either: - Column indices (integers): Position of each column - Column names (strings): Header names from your CSV From DataFrame \u00b6 If you already have a pandas DataFrame, ensure it has the required columns: import pandas as pd import optopsy as op # Your existing DataFrame df = pd . read_csv ( 'options_data.csv' ) # Rename columns to match Optopsy's expected format df = df . rename ( columns = { 'Symbol' : 'underlying_symbol' , 'UnderlyingPrice' : 'underlying_price' , 'Type' : 'option_type' , 'Expiration' : 'expiration' , 'QuoteDate' : 'quote_date' , 'Strike' : 'strike' , 'Bid' : 'bid' , 'Ask' : 'ask' }) # Now you can use it directly results = op . long_calls ( df ) Running Your First Backtest \u00b6 Example: Long Calls \u00b6 Let's backtest a simple long call strategy: import optopsy as op # Load data data = op . csv_data ( 'SPX_2023.csv' ) # Run backtest with default parameters results = op . long_calls ( data ) print ( results ) Example with Custom Parameters \u00b6 Customize the backtest parameters: results = op . long_calls ( data , max_entry_dte = 60 , # Enter with 60 days to expiration exit_dte = 30 , # Exit at 30 DTE dte_interval = 7 , # Group results by 7-day intervals max_otm_pct = 0.20 , # Maximum 20% out-of-the-money otm_pct_interval = 0.05 , # Group by 5% OTM intervals min_bid_ask = 0.10 # Minimum $0.10 bid-ask spread ) print ( results . head ()) Understanding the Output \u00b6 Aggregated Results (Default) \u00b6 By default, strategies return aggregated statistics grouped by DTE and OTM% ranges: results = op . long_calls ( data ) print ( results . columns ) # ['dte_range', 'otm_pct_range', 'count', 'mean', 'std', 'min', '25%', '50%', '75%', 'max'] Example output: dte_range otm_pct_range count mean std min 50% max (0, 7] (0.0, 0.05] 1250 0.23 0.45 -1.0 0.15 2.8 (0, 7] (0.05, 0.10] 980 0.18 0.52 -1.0 0.10 3.2 Raw Trade Data \u00b6 Get individual trade details by setting raw=True : results = op . long_calls ( data , raw = True ) print ( results . columns ) # ['underlying_symbol', 'expiration', 'dte_entry', 'strike', 'entry', 'exit', 'pct_change', ...] This gives you every individual trade for custom analysis. Next Steps \u00b6 Explore all 28 strategies Learn about strategy parameters See more examples with Greeks filtering and slippage Read the API Reference for detailed function documentation Common Issues \u00b6 Date Format Errors \u00b6 If you encounter date parsing errors, ensure your dates are in a standard format: - ISO format: 2023-01-20 - US format: 01/20/2023 - European format: 20/01/2023 The csv_data() function will attempt to auto-detect date formats. Missing Columns \u00b6 If you see a \"KeyError\" for a column, check that: 1. The column exists in your data 2. You've specified the correct column index or name in csv_data() 3. Column names match exactly (case-sensitive) Empty Results \u00b6 If your backtest returns no results: - Check your parameter ranges (DTE, OTM%, etc.) - Verify your data covers the time period you're testing - Ensure bid/ask spreads meet the min_bid_ask threshold","title":"Getting Started"},{"location":"getting-started/#getting-started","text":"This guide will walk you through setting up Optopsy and running your first backtest.","title":"Getting Started"},{"location":"getting-started/#installation","text":"Install Optopsy using pip: pip install optopsy","title":"Installation"},{"location":"getting-started/#requirements","text":"Python 3.8 or higher Pandas 2.0 or higher NumPy 1.26 or higher","title":"Requirements"},{"location":"getting-started/#data-format","text":"Optopsy requires historical options chain data with the following columns: Column Description Example underlying_symbol Ticker symbol SPX, SPY, QQQ underlying_price Stock/index price 4500.00 option_type Call or Put 'c', 'p', 'call', 'put' expiration Option expiration date 2023-01-20 quote_date Date of the quote 2023-01-01 strike Strike price 4500 bid Bid price 10.50 ask Ask price 11.00","title":"Data Format"},{"location":"getting-started/#optional-columns-for-greeks-filtering","text":"Column Description delta Option delta gamma Option gamma theta Option theta vega Option vega volume Trading volume open_interest Open interest","title":"Optional Columns for Greeks Filtering"},{"location":"getting-started/#loading-data","text":"","title":"Loading Data"},{"location":"getting-started/#from-csv","text":"Use csv_data() to load options data from a CSV file: import optopsy as op data = op . csv_data ( 'options_data.csv' , underlying_symbol = 0 , # Column index or name underlying_price = 1 , option_type = 2 , expiration = 3 , quote_date = 4 , strike = 5 , bid = 6 , ask = 7 ) The function accepts either: - Column indices (integers): Position of each column - Column names (strings): Header names from your CSV","title":"From CSV"},{"location":"getting-started/#from-dataframe","text":"If you already have a pandas DataFrame, ensure it has the required columns: import pandas as pd import optopsy as op # Your existing DataFrame df = pd . read_csv ( 'options_data.csv' ) # Rename columns to match Optopsy's expected format df = df . rename ( columns = { 'Symbol' : 'underlying_symbol' , 'UnderlyingPrice' : 'underlying_price' , 'Type' : 'option_type' , 'Expiration' : 'expiration' , 'QuoteDate' : 'quote_date' , 'Strike' : 'strike' , 'Bid' : 'bid' , 'Ask' : 'ask' }) # Now you can use it directly results = op . long_calls ( df )","title":"From DataFrame"},{"location":"getting-started/#running-your-first-backtest","text":"","title":"Running Your First Backtest"},{"location":"getting-started/#example-long-calls","text":"Let's backtest a simple long call strategy: import optopsy as op # Load data data = op . csv_data ( 'SPX_2023.csv' ) # Run backtest with default parameters results = op . long_calls ( data ) print ( results )","title":"Example: Long Calls"},{"location":"getting-started/#example-with-custom-parameters","text":"Customize the backtest parameters: results = op . long_calls ( data , max_entry_dte = 60 , # Enter with 60 days to expiration exit_dte = 30 , # Exit at 30 DTE dte_interval = 7 , # Group results by 7-day intervals max_otm_pct = 0.20 , # Maximum 20% out-of-the-money otm_pct_interval = 0.05 , # Group by 5% OTM intervals min_bid_ask = 0.10 # Minimum $0.10 bid-ask spread ) print ( results . head ())","title":"Example with Custom Parameters"},{"location":"getting-started/#understanding-the-output","text":"","title":"Understanding the Output"},{"location":"getting-started/#aggregated-results-default","text":"By default, strategies return aggregated statistics grouped by DTE and OTM% ranges: results = op . long_calls ( data ) print ( results . columns ) # ['dte_range', 'otm_pct_range', 'count', 'mean', 'std', 'min', '25%', '50%', '75%', 'max'] Example output: dte_range otm_pct_range count mean std min 50% max (0, 7] (0.0, 0.05] 1250 0.23 0.45 -1.0 0.15 2.8 (0, 7] (0.05, 0.10] 980 0.18 0.52 -1.0 0.10 3.2","title":"Aggregated Results (Default)"},{"location":"getting-started/#raw-trade-data","text":"Get individual trade details by setting raw=True : results = op . long_calls ( data , raw = True ) print ( results . columns ) # ['underlying_symbol', 'expiration', 'dte_entry', 'strike', 'entry', 'exit', 'pct_change', ...] This gives you every individual trade for custom analysis.","title":"Raw Trade Data"},{"location":"getting-started/#next-steps","text":"Explore all 28 strategies Learn about strategy parameters See more examples with Greeks filtering and slippage Read the API Reference for detailed function documentation","title":"Next Steps"},{"location":"getting-started/#common-issues","text":"","title":"Common Issues"},{"location":"getting-started/#date-format-errors","text":"If you encounter date parsing errors, ensure your dates are in a standard format: - ISO format: 2023-01-20 - US format: 01/20/2023 - European format: 20/01/2023 The csv_data() function will attempt to auto-detect date formats.","title":"Date Format Errors"},{"location":"getting-started/#missing-columns","text":"If you see a \"KeyError\" for a column, check that: 1. The column exists in your data 2. You've specified the correct column index or name in csv_data() 3. Column names match exactly (case-sensitive)","title":"Missing Columns"},{"location":"getting-started/#empty-results","text":"If your backtest returns no results: - Check your parameter ranges (DTE, OTM%, etc.) - Verify your data covers the time period you're testing - Ensure bid/ask spreads meet the min_bid_ask threshold","title":"Empty Results"},{"location":"parameters/","text":"Strategy Parameters \u00b6 All Optopsy strategies accept a common set of parameters for filtering, grouping, and output formatting. This guide covers all available parameters and their usage. Core Parameters \u00b6 Entry and Exit Timing \u00b6 max_entry_dte \u00b6 Type: int | Default: 90 Maximum days to expiration at strategy entry. results = op . iron_condor ( data , max_entry_dte = 45 ) # Enter at 45 DTE or less Use Cases: - max_entry_dte=30 - Short-term trades - max_entry_dte=60 - Medium-term trades - max_entry_dte=90 - Longer-term positions exit_dte \u00b6 Type: int | Default: 0 Days to expiration when the strategy exits. Use 0 to hold until expiration. results = op . long_calls ( data , max_entry_dte = 60 , exit_dte = 30 ) # Exit at 30 DTE Use Cases: - exit_dte=0 - Hold to expiration - exit_dte=21 - Exit 3 weeks before expiration - exit_dte=7 - Exit 1 week before expiration Filtering Parameters \u00b6 max_otm_pct \u00b6 Type: float | Default: 0.5 Maximum out-of-the-money percentage for option selection. results = op . short_puts ( data , max_otm_pct = 0.20 ) # Max 20% OTM Examples: - 0.05 - Near ATM options (5% OTM max) - 0.20 - Moderately OTM (20% OTM max) - 0.50 - Wide range (50% OTM max) Calculation: # For calls: (strike - underlying_price) / underlying_price # For puts: (underlying_price - strike) / underlying_price min_bid_ask \u00b6 Type: float | Default: 0.05 Minimum bid-ask spread required for option liquidity. results = op . iron_condor ( data , min_bid_ask = 0.10 ) # Require $0.10+ spread Use Cases: - 0.05 - Less liquid underlyings - 0.10 - Standard liquidity requirement - 0.20 - High liquidity requirement (SPX, SPY) Grouping and Aggregation \u00b6 dte_interval \u00b6 Type: int | Default: 7 Interval for grouping results by DTE ranges. results = op . long_calls ( data , dte_interval = 14 ) # Group by 14-day buckets Examples: - 7 - Weekly groupings: (0,7], (7,14], (14,21], ... - 14 - Bi-weekly groupings: (0,14], (14,28], ... - 30 - Monthly groupings: (0,30], (30,60], ... otm_pct_interval \u00b6 Type: float | Default: 0.05 Interval for grouping results by OTM percentage ranges. results = op . short_strangles ( data , otm_pct_interval = 0.10 ) # 10% OTM buckets Examples: - 0.05 - Fine-grained: (0.0, 0.05], (0.05, 0.10], ... - 0.10 - Coarse buckets: (0.0, 0.10], (0.10, 0.20], ... Output Control \u00b6 raw \u00b6 Type: bool | Default: False Return raw trade data instead of aggregated statistics. # Aggregated statistics (default) results = op . iron_condor ( data , raw = False ) # Output: ['dte_range', 'otm_pct_range', 'count', 'mean', 'std', ...] # Raw trade data trades = op . iron_condor ( data , raw = True ) # Output: ['expiration', 'strike_leg1', 'strike_leg2', 'entry', 'exit', 'pct_change', ...] Use Cases: - raw=False - Performance statistics, backtesting results - raw=True - Custom analysis, detailed inspection, debugging drop_nan \u00b6 Type: bool | Default: True Drop rows with NaN values in the results. results = op . long_calls ( data , drop_nan = False ) # Keep NaN values Greeks Parameters \u00b6 Delta Filtering \u00b6 delta_min / delta_max \u00b6 Type: float | Default: None Filter options by delta range. # Target 30-delta options results = op . short_puts ( data , delta_min = 0.25 , delta_max = 0.35 ) Common Delta Ranges: - 0.15-0.20 - 1 standard deviation OTM (~15-20% probability ITM) - 0.25-0.35 - Popular for credit spreads - 0.40-0.50 - Near-the-money options - 0.50+ - In-the-money options Note: Requires delta column in your data. delta_interval \u00b6 Type: float | Default: None Group results by delta ranges. results = op . iron_condor ( data , delta_interval = 0.10 # Group by: (0.0,0.1], (0.1,0.2], etc. ) Slippage Parameters \u00b6 slippage \u00b6 Type: str | Default: 'mid' Slippage model for fill price calculation. results = op . long_calls ( data , slippage = 'liquidity' ) Options: Mode Description Buy Fill Sell Fill Best For 'mid' Mid-price between bid/ask (bid+ask)/2 (bid+ask)/2 Ideal/optimistic 'spread' Worst-case spread Ask Bid Conservative 'liquidity' Volume-based dynamic Dynamic Dynamic Realistic fill_ratio (Liquidity Mode Only) \u00b6 Type: float | Default: 0.5 Base fill ratio for liquidity-based slippage (0.0 = bid/ask, 1.0 = ask/bid). results = op . iron_condor ( data , slippage = 'liquidity' , fill_ratio = 0.3 # More conservative fill (30% through spread) ) Examples: - 0.0 - Worst case (buy at ask, sell at bid) - 0.5 - Mid-point (default) - 1.0 - Best case (buy at bid, sell at ask - unrealistic) reference_volume (Liquidity Mode Only) \u00b6 Type: int | Default: 1000 Volume threshold for determining liquid options in liquidity mode. results = op . short_strangles ( data , slippage = 'liquidity' , reference_volume = 5000 # Higher threshold for SPX ) Guidelines: - 500-1000 - Less liquid underlyings - 1000-2000 - Standard liquidity (default) - 5000+ - Highly liquid (SPX, SPY, QQQ) Note: Requires volume or open_interest column in your data. Calendar & Diagonal Parameters \u00b6 Calendar and diagonal spreads use different timing parameters: front_dte_min / front_dte_max \u00b6 Type: int | Default: 20 / 40 DTE range for the front-month leg. results = op . long_call_calendar ( data , front_dte_min = 25 , front_dte_max = 35 # Front leg between 25-35 DTE ) back_dte_min / back_dte_max \u00b6 Type: int | Default: 50 / 90 DTE range for the back-month leg. results = op . long_call_diagonal ( data , back_dte_min = 60 , back_dte_max = 120 # Back leg between 60-120 DTE ) Complete Example \u00b6 Combining multiple parameters: import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) results = op . iron_condor ( data , # Timing max_entry_dte = 45 , exit_dte = 21 , # Filtering max_otm_pct = 0.30 , min_bid_ask = 0.15 , delta_min = 0.15 , delta_max = 0.20 , # Grouping dte_interval = 7 , otm_pct_interval = 0.05 , delta_interval = 0.05 , # Slippage slippage = 'liquidity' , fill_ratio = 0.5 , reference_volume = 5000 , # Output raw = False , drop_nan = True ) print ( results . head ()) Default Values Reference \u00b6 Standard Strategies \u00b6 default_kwargs = { \"dte_interval\" : 7 , \"max_entry_dte\" : 90 , \"exit_dte\" : 0 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , \"min_bid_ask\" : 0.05 , \"drop_nan\" : True , \"raw\" : False , \"delta_min\" : None , \"delta_max\" : None , \"delta_interval\" : None , \"slippage\" : \"mid\" , \"fill_ratio\" : 0.5 , \"reference_volume\" : 1000 , } Calendar & Diagonal Strategies \u00b6 calendar_default_kwargs = { \"front_dte_min\" : 20 , \"front_dte_max\" : 40 , \"back_dte_min\" : 50 , \"back_dte_max\" : 90 , \"exit_dte\" : 7 , \"dte_interval\" : 7 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , \"min_bid_ask\" : 0.05 , \"drop_nan\" : True , \"raw\" : False , \"slippage\" : \"mid\" , \"fill_ratio\" : 0.5 , \"reference_volume\" : 1000 , } Next Steps \u00b6 See Examples for real-world parameter usage Explore Strategies to understand strategy-specific considerations Review API Reference for function signatures","title":"Parameters"},{"location":"parameters/#strategy-parameters","text":"All Optopsy strategies accept a common set of parameters for filtering, grouping, and output formatting. This guide covers all available parameters and their usage.","title":"Strategy Parameters"},{"location":"parameters/#core-parameters","text":"","title":"Core Parameters"},{"location":"parameters/#entry-and-exit-timing","text":"","title":"Entry and Exit Timing"},{"location":"parameters/#max_entry_dte","text":"Type: int | Default: 90 Maximum days to expiration at strategy entry. results = op . iron_condor ( data , max_entry_dte = 45 ) # Enter at 45 DTE or less Use Cases: - max_entry_dte=30 - Short-term trades - max_entry_dte=60 - Medium-term trades - max_entry_dte=90 - Longer-term positions","title":"max_entry_dte"},{"location":"parameters/#exit_dte","text":"Type: int | Default: 0 Days to expiration when the strategy exits. Use 0 to hold until expiration. results = op . long_calls ( data , max_entry_dte = 60 , exit_dte = 30 ) # Exit at 30 DTE Use Cases: - exit_dte=0 - Hold to expiration - exit_dte=21 - Exit 3 weeks before expiration - exit_dte=7 - Exit 1 week before expiration","title":"exit_dte"},{"location":"parameters/#filtering-parameters","text":"","title":"Filtering Parameters"},{"location":"parameters/#max_otm_pct","text":"Type: float | Default: 0.5 Maximum out-of-the-money percentage for option selection. results = op . short_puts ( data , max_otm_pct = 0.20 ) # Max 20% OTM Examples: - 0.05 - Near ATM options (5% OTM max) - 0.20 - Moderately OTM (20% OTM max) - 0.50 - Wide range (50% OTM max) Calculation: # For calls: (strike - underlying_price) / underlying_price # For puts: (underlying_price - strike) / underlying_price","title":"max_otm_pct"},{"location":"parameters/#min_bid_ask","text":"Type: float | Default: 0.05 Minimum bid-ask spread required for option liquidity. results = op . iron_condor ( data , min_bid_ask = 0.10 ) # Require $0.10+ spread Use Cases: - 0.05 - Less liquid underlyings - 0.10 - Standard liquidity requirement - 0.20 - High liquidity requirement (SPX, SPY)","title":"min_bid_ask"},{"location":"parameters/#grouping-and-aggregation","text":"","title":"Grouping and Aggregation"},{"location":"parameters/#dte_interval","text":"Type: int | Default: 7 Interval for grouping results by DTE ranges. results = op . long_calls ( data , dte_interval = 14 ) # Group by 14-day buckets Examples: - 7 - Weekly groupings: (0,7], (7,14], (14,21], ... - 14 - Bi-weekly groupings: (0,14], (14,28], ... - 30 - Monthly groupings: (0,30], (30,60], ...","title":"dte_interval"},{"location":"parameters/#otm_pct_interval","text":"Type: float | Default: 0.05 Interval for grouping results by OTM percentage ranges. results = op . short_strangles ( data , otm_pct_interval = 0.10 ) # 10% OTM buckets Examples: - 0.05 - Fine-grained: (0.0, 0.05], (0.05, 0.10], ... - 0.10 - Coarse buckets: (0.0, 0.10], (0.10, 0.20], ...","title":"otm_pct_interval"},{"location":"parameters/#output-control","text":"","title":"Output Control"},{"location":"parameters/#raw","text":"Type: bool | Default: False Return raw trade data instead of aggregated statistics. # Aggregated statistics (default) results = op . iron_condor ( data , raw = False ) # Output: ['dte_range', 'otm_pct_range', 'count', 'mean', 'std', ...] # Raw trade data trades = op . iron_condor ( data , raw = True ) # Output: ['expiration', 'strike_leg1', 'strike_leg2', 'entry', 'exit', 'pct_change', ...] Use Cases: - raw=False - Performance statistics, backtesting results - raw=True - Custom analysis, detailed inspection, debugging","title":"raw"},{"location":"parameters/#drop_nan","text":"Type: bool | Default: True Drop rows with NaN values in the results. results = op . long_calls ( data , drop_nan = False ) # Keep NaN values","title":"drop_nan"},{"location":"parameters/#greeks-parameters","text":"","title":"Greeks Parameters"},{"location":"parameters/#delta-filtering","text":"","title":"Delta Filtering"},{"location":"parameters/#delta_min-delta_max","text":"Type: float | Default: None Filter options by delta range. # Target 30-delta options results = op . short_puts ( data , delta_min = 0.25 , delta_max = 0.35 ) Common Delta Ranges: - 0.15-0.20 - 1 standard deviation OTM (~15-20% probability ITM) - 0.25-0.35 - Popular for credit spreads - 0.40-0.50 - Near-the-money options - 0.50+ - In-the-money options Note: Requires delta column in your data.","title":"delta_min / delta_max"},{"location":"parameters/#delta_interval","text":"Type: float | Default: None Group results by delta ranges. results = op . iron_condor ( data , delta_interval = 0.10 # Group by: (0.0,0.1], (0.1,0.2], etc. )","title":"delta_interval"},{"location":"parameters/#slippage-parameters","text":"","title":"Slippage Parameters"},{"location":"parameters/#slippage","text":"Type: str | Default: 'mid' Slippage model for fill price calculation. results = op . long_calls ( data , slippage = 'liquidity' ) Options: Mode Description Buy Fill Sell Fill Best For 'mid' Mid-price between bid/ask (bid+ask)/2 (bid+ask)/2 Ideal/optimistic 'spread' Worst-case spread Ask Bid Conservative 'liquidity' Volume-based dynamic Dynamic Dynamic Realistic","title":"slippage"},{"location":"parameters/#fill_ratio-liquidity-mode-only","text":"Type: float | Default: 0.5 Base fill ratio for liquidity-based slippage (0.0 = bid/ask, 1.0 = ask/bid). results = op . iron_condor ( data , slippage = 'liquidity' , fill_ratio = 0.3 # More conservative fill (30% through spread) ) Examples: - 0.0 - Worst case (buy at ask, sell at bid) - 0.5 - Mid-point (default) - 1.0 - Best case (buy at bid, sell at ask - unrealistic)","title":"fill_ratio (Liquidity Mode Only)"},{"location":"parameters/#reference_volume-liquidity-mode-only","text":"Type: int | Default: 1000 Volume threshold for determining liquid options in liquidity mode. results = op . short_strangles ( data , slippage = 'liquidity' , reference_volume = 5000 # Higher threshold for SPX ) Guidelines: - 500-1000 - Less liquid underlyings - 1000-2000 - Standard liquidity (default) - 5000+ - Highly liquid (SPX, SPY, QQQ) Note: Requires volume or open_interest column in your data.","title":"reference_volume (Liquidity Mode Only)"},{"location":"parameters/#calendar-diagonal-parameters","text":"Calendar and diagonal spreads use different timing parameters:","title":"Calendar &amp; Diagonal Parameters"},{"location":"parameters/#front_dte_min-front_dte_max","text":"Type: int | Default: 20 / 40 DTE range for the front-month leg. results = op . long_call_calendar ( data , front_dte_min = 25 , front_dte_max = 35 # Front leg between 25-35 DTE )","title":"front_dte_min / front_dte_max"},{"location":"parameters/#back_dte_min-back_dte_max","text":"Type: int | Default: 50 / 90 DTE range for the back-month leg. results = op . long_call_diagonal ( data , back_dte_min = 60 , back_dte_max = 120 # Back leg between 60-120 DTE )","title":"back_dte_min / back_dte_max"},{"location":"parameters/#complete-example","text":"Combining multiple parameters: import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) results = op . iron_condor ( data , # Timing max_entry_dte = 45 , exit_dte = 21 , # Filtering max_otm_pct = 0.30 , min_bid_ask = 0.15 , delta_min = 0.15 , delta_max = 0.20 , # Grouping dte_interval = 7 , otm_pct_interval = 0.05 , delta_interval = 0.05 , # Slippage slippage = 'liquidity' , fill_ratio = 0.5 , reference_volume = 5000 , # Output raw = False , drop_nan = True ) print ( results . head ())","title":"Complete Example"},{"location":"parameters/#default-values-reference","text":"","title":"Default Values Reference"},{"location":"parameters/#standard-strategies","text":"default_kwargs = { \"dte_interval\" : 7 , \"max_entry_dte\" : 90 , \"exit_dte\" : 0 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , \"min_bid_ask\" : 0.05 , \"drop_nan\" : True , \"raw\" : False , \"delta_min\" : None , \"delta_max\" : None , \"delta_interval\" : None , \"slippage\" : \"mid\" , \"fill_ratio\" : 0.5 , \"reference_volume\" : 1000 , }","title":"Standard Strategies"},{"location":"parameters/#calendar-diagonal-strategies","text":"calendar_default_kwargs = { \"front_dte_min\" : 20 , \"front_dte_max\" : 40 , \"back_dte_min\" : 50 , \"back_dte_max\" : 90 , \"exit_dte\" : 7 , \"dte_interval\" : 7 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , \"min_bid_ask\" : 0.05 , \"drop_nan\" : True , \"raw\" : False , \"slippage\" : \"mid\" , \"fill_ratio\" : 0.5 , \"reference_volume\" : 1000 , }","title":"Calendar &amp; Diagonal Strategies"},{"location":"parameters/#next-steps","text":"See Examples for real-world parameter usage Explore Strategies to understand strategy-specific considerations Review API Reference for function signatures","title":"Next Steps"},{"location":"strategies/","text":"Strategy Overview \u00b6 Optopsy includes 28 built-in options strategies covering single-leg, multi-leg, and time-based strategies. Strategy Categories \u00b6 Single-Leg Strategies (4) \u00b6 Basic directional plays with calls or puts. Long Calls - Bullish directional bet Short Calls - Bearish or neutral income Long Puts - Bearish directional bet Short Puts - Bullish income strategy Learn more \u2192 Straddles & Strangles (4) \u00b6 Volatility-based strategies combining calls and puts. Long Straddle - Profit from big moves Short Straddle - Income from low volatility Long Strangle - Lower-cost volatility play Short Strangle - Wider profit zone income Learn more \u2192 Vertical Spreads (4) \u00b6 Limited-risk directional strategies. Long Call Spread - Bullish debit spread Short Call Spread - Bearish credit spread Long Put Spread - Bearish debit spread Short Put Spread - Bullish credit spread Learn more \u2192 Butterfly Spreads (4) \u00b6 Neutral strategies targeting specific price ranges. Long Call Butterfly - Profit at middle strike Short Call Butterfly - Profit from movement Long Put Butterfly - Bearish butterfly Short Put Butterfly - Inverse put butterfly Learn more \u2192 Iron Strategies (4) \u00b6 Four-leg strategies with defined risk. Iron Condor - Range-bound income Reverse Iron Condor - Breakout play Iron Butterfly - Tighter profit zone Reverse Iron Butterfly - Long volatility Learn more \u2192 Covered Strategies (2) \u00b6 Stock + option combinations (synthetic). Covered Call - Income on stock holdings Protective Put - Downside insurance Learn more \u2192 Calendar Spreads (4) \u00b6 Same strike, different expirations. Long Call Calendar - Time decay play Short Call Calendar - Opposite calendar Long Put Calendar - Bearish time spread Short Put Calendar - Reverse put calendar Learn more \u2192 Diagonal Spreads (4) \u00b6 Different strikes and expirations. Long Call Diagonal - Hybrid spread Short Call Diagonal - Reverse call diagonal Long Put Diagonal - Bearish diagonal Short Put Diagonal - Bullish diagonal Learn more \u2192 Quick Reference Table \u00b6 Strategy Legs Market View Max Profit Max Loss Example Use Long Call 1 Bullish Unlimited Premium paid Betting on rally Short Put 1 Bullish Premium received Substantial Income generation Iron Condor 4 Neutral Net credit Difference in strikes Range-bound markets Long Straddle 2 High volatility Unlimited Premiums paid Before earnings Call Butterfly 3 Neutral Width of wing Net debit Pinning at strike Call Calendar 2 Neutral Variable Net debit Time decay play Strategy Selection Guide \u00b6 If you think the market will... \u00b6 Go Up Significantly - Long Calls - Long Call Spread Go Down Significantly - Long Puts - Long Put Spread Stay Flat - Short Straddle - Short Strangle - Iron Condor - Iron Butterfly Move But Unsure Direction - Long Straddle - Long Strangle Stay Near Current Price - Calendar Spreads - Butterflies By Risk/Reward Profile \u00b6 Limited Risk, Limited Reward - All spreads (vertical, butterfly, iron condor) Limited Risk, Unlimited Reward - Long calls/puts - Long straddles/strangles Substantial Risk, Limited Reward - Short calls/puts - Short straddles/strangles Common Parameters \u00b6 All strategies accept these common parameters: max_entry_dte - Maximum days to expiration at entry exit_dte - Days to expiration at exit dte_interval - Grouping interval for results max_otm_pct - Maximum out-of-the-money percentage otm_pct_interval - Grouping interval for OTM% min_bid_ask - Minimum bid-ask spread filter raw - Return raw trade data (default: aggregated stats) See the Parameters Guide for complete details. Next Steps \u00b6 Dive into specific strategy categories Learn about strategy parameters See examples of real backtests Check the API Reference for function signatures","title":"Overview"},{"location":"strategies/#strategy-overview","text":"Optopsy includes 28 built-in options strategies covering single-leg, multi-leg, and time-based strategies.","title":"Strategy Overview"},{"location":"strategies/#strategy-categories","text":"","title":"Strategy Categories"},{"location":"strategies/#single-leg-strategies-4","text":"Basic directional plays with calls or puts. Long Calls - Bullish directional bet Short Calls - Bearish or neutral income Long Puts - Bearish directional bet Short Puts - Bullish income strategy Learn more \u2192","title":"Single-Leg Strategies (4)"},{"location":"strategies/#straddles-strangles-4","text":"Volatility-based strategies combining calls and puts. Long Straddle - Profit from big moves Short Straddle - Income from low volatility Long Strangle - Lower-cost volatility play Short Strangle - Wider profit zone income Learn more \u2192","title":"Straddles &amp; Strangles (4)"},{"location":"strategies/#vertical-spreads-4","text":"Limited-risk directional strategies. Long Call Spread - Bullish debit spread Short Call Spread - Bearish credit spread Long Put Spread - Bearish debit spread Short Put Spread - Bullish credit spread Learn more \u2192","title":"Vertical Spreads (4)"},{"location":"strategies/#butterfly-spreads-4","text":"Neutral strategies targeting specific price ranges. Long Call Butterfly - Profit at middle strike Short Call Butterfly - Profit from movement Long Put Butterfly - Bearish butterfly Short Put Butterfly - Inverse put butterfly Learn more \u2192","title":"Butterfly Spreads (4)"},{"location":"strategies/#iron-strategies-4","text":"Four-leg strategies with defined risk. Iron Condor - Range-bound income Reverse Iron Condor - Breakout play Iron Butterfly - Tighter profit zone Reverse Iron Butterfly - Long volatility Learn more \u2192","title":"Iron Strategies (4)"},{"location":"strategies/#covered-strategies-2","text":"Stock + option combinations (synthetic). Covered Call - Income on stock holdings Protective Put - Downside insurance Learn more \u2192","title":"Covered Strategies (2)"},{"location":"strategies/#calendar-spreads-4","text":"Same strike, different expirations. Long Call Calendar - Time decay play Short Call Calendar - Opposite calendar Long Put Calendar - Bearish time spread Short Put Calendar - Reverse put calendar Learn more \u2192","title":"Calendar Spreads (4)"},{"location":"strategies/#diagonal-spreads-4","text":"Different strikes and expirations. Long Call Diagonal - Hybrid spread Short Call Diagonal - Reverse call diagonal Long Put Diagonal - Bearish diagonal Short Put Diagonal - Bullish diagonal Learn more \u2192","title":"Diagonal Spreads (4)"},{"location":"strategies/#quick-reference-table","text":"Strategy Legs Market View Max Profit Max Loss Example Use Long Call 1 Bullish Unlimited Premium paid Betting on rally Short Put 1 Bullish Premium received Substantial Income generation Iron Condor 4 Neutral Net credit Difference in strikes Range-bound markets Long Straddle 2 High volatility Unlimited Premiums paid Before earnings Call Butterfly 3 Neutral Width of wing Net debit Pinning at strike Call Calendar 2 Neutral Variable Net debit Time decay play","title":"Quick Reference Table"},{"location":"strategies/#strategy-selection-guide","text":"","title":"Strategy Selection Guide"},{"location":"strategies/#if-you-think-the-market-will","text":"Go Up Significantly - Long Calls - Long Call Spread Go Down Significantly - Long Puts - Long Put Spread Stay Flat - Short Straddle - Short Strangle - Iron Condor - Iron Butterfly Move But Unsure Direction - Long Straddle - Long Strangle Stay Near Current Price - Calendar Spreads - Butterflies","title":"If you think the market will..."},{"location":"strategies/#by-riskreward-profile","text":"Limited Risk, Limited Reward - All spreads (vertical, butterfly, iron condor) Limited Risk, Unlimited Reward - Long calls/puts - Long straddles/strangles Substantial Risk, Limited Reward - Short calls/puts - Short straddles/strangles","title":"By Risk/Reward Profile"},{"location":"strategies/#common-parameters","text":"All strategies accept these common parameters: max_entry_dte - Maximum days to expiration at entry exit_dte - Days to expiration at exit dte_interval - Grouping interval for results max_otm_pct - Maximum out-of-the-money percentage otm_pct_interval - Grouping interval for OTM% min_bid_ask - Minimum bid-ask spread filter raw - Return raw trade data (default: aggregated stats) See the Parameters Guide for complete details.","title":"Common Parameters"},{"location":"strategies/#next-steps","text":"Dive into specific strategy categories Learn about strategy parameters See examples of real backtests Check the API Reference for function signatures","title":"Next Steps"},{"location":"strategies/butterflies/","text":"Butterfly Spreads \u00b6 Butterfly spreads are three-leg strategies designed to profit when the underlying stays near a specific price. They offer defined risk and defined reward with neutral market outlooks. Long Call Butterfly \u00b6 Description \u00b6 Profits when the underlying stays at the middle strike at expiration. Composition: - Long 1 call at lower strike (wing) - Short 2 calls at middle strike (body) - Long 1 call at upper strike (wing) Example \u00b6 import optopsy as op results = op . long_call_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 ) Short Call Butterfly \u00b6 Description \u00b6 Profits when the underlying moves away from the middle strike in either direction. Composition: - Short 1 call at lower strike - Long 2 calls at middle strike - Short 1 call at upper strike Example \u00b6 results = op . short_call_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 ) Long Put Butterfly \u00b6 Description \u00b6 Similar to long call butterfly but using puts. Profits at middle strike. Composition: - Long 1 put at lower strike (wing) - Short 2 puts at middle strike (body) - Long 1 put at upper strike (wing) Example \u00b6 results = op . long_put_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 ) Short Put Butterfly \u00b6 Description \u00b6 Profits when the underlying moves significantly away from the middle strike. Composition: - Short 1 put at lower strike - Long 2 puts at middle strike - Short 1 put at upper strike Example \u00b6 results = op . short_put_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 ) Key Characteristics \u00b6 Equal Wing Width : Wings are equidistant from the body Low Cost : Often entered for small debit or even credit Defined Risk : Maximum loss is limited to debit paid High Precision : Profits in narrow range around middle strike","title":"Butterflies"},{"location":"strategies/butterflies/#butterfly-spreads","text":"Butterfly spreads are three-leg strategies designed to profit when the underlying stays near a specific price. They offer defined risk and defined reward with neutral market outlooks.","title":"Butterfly Spreads"},{"location":"strategies/butterflies/#long-call-butterfly","text":"","title":"Long Call Butterfly"},{"location":"strategies/butterflies/#description","text":"Profits when the underlying stays at the middle strike at expiration. Composition: - Long 1 call at lower strike (wing) - Short 2 calls at middle strike (body) - Long 1 call at upper strike (wing)","title":"Description"},{"location":"strategies/butterflies/#example","text":"import optopsy as op results = op . long_call_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 )","title":"Example"},{"location":"strategies/butterflies/#short-call-butterfly","text":"","title":"Short Call Butterfly"},{"location":"strategies/butterflies/#description_1","text":"Profits when the underlying moves away from the middle strike in either direction. Composition: - Short 1 call at lower strike - Long 2 calls at middle strike - Short 1 call at upper strike","title":"Description"},{"location":"strategies/butterflies/#example_1","text":"results = op . short_call_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 )","title":"Example"},{"location":"strategies/butterflies/#long-put-butterfly","text":"","title":"Long Put Butterfly"},{"location":"strategies/butterflies/#description_2","text":"Similar to long call butterfly but using puts. Profits at middle strike. Composition: - Long 1 put at lower strike (wing) - Short 2 puts at middle strike (body) - Long 1 put at upper strike (wing)","title":"Description"},{"location":"strategies/butterflies/#example_2","text":"results = op . long_put_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 )","title":"Example"},{"location":"strategies/butterflies/#short-put-butterfly","text":"","title":"Short Put Butterfly"},{"location":"strategies/butterflies/#description_3","text":"Profits when the underlying moves significantly away from the middle strike. Composition: - Short 1 put at lower strike - Long 2 puts at middle strike - Short 1 put at upper strike","title":"Description"},{"location":"strategies/butterflies/#example_3","text":"results = op . short_put_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 )","title":"Example"},{"location":"strategies/butterflies/#key-characteristics","text":"Equal Wing Width : Wings are equidistant from the body Low Cost : Often entered for small debit or even credit Defined Risk : Maximum loss is limited to debit paid High Precision : Profits in narrow range around middle strike","title":"Key Characteristics"},{"location":"strategies/calendars/","text":"Calendar Spreads \u00b6 Calendar spreads (also called time spreads or horizontal spreads) use options with the same strike but different expiration dates. They profit from time decay differential and changes in implied volatility. Long Call Calendar \u00b6 Description \u00b6 Sell a near-term call and buy a longer-term call at the same strike. Profits from time decay and volatility expansion in the back month. Composition: - Short 1 front-month call (near expiration) - Long 1 back-month call (longer expiration) - Both at the same strike Example \u00b6 import optopsy as op results = op . long_call_calendar ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , exit_dte = 7 # Exit 7 days before front expiration ) Use Cases \u00b6 Neutral markets near the strike Expecting volatility increase Time decay plays Short Call Calendar \u00b6 Description \u00b6 Buy the near-term call, sell the longer-term call. Profits from significant movement away from strike. Composition: - Long 1 front-month call - Short 1 back-month call - Both at the same strike Example \u00b6 results = op . short_call_calendar ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 ) Long Put Calendar \u00b6 Description \u00b6 Similar to long call calendar but with puts. Profits from neutral price action at the strike. Composition: - Short 1 front-month put - Long 1 back-month put - Both at the same strike Example \u00b6 results = op . long_put_calendar ( data ) Short Put Calendar \u00b6 Description \u00b6 Opposite of long put calendar. Profits from movement away from strike. Composition: - Long 1 front-month put - Short 1 back-month put - Both at the same strike Example \u00b6 results = op . short_put_calendar ( data ) Key Parameters \u00b6 Calendar spreads use different default parameters: calendar_default_kwargs = { \"front_dte_min\" : 20 , # Min DTE for front leg \"front_dte_max\" : 40 , # Max DTE for front leg \"back_dte_min\" : 50 , # Min DTE for back leg \"back_dte_max\" : 90 , # Max DTE for back leg \"exit_dte\" : 7 , # Exit 7 days before front expiration \"dte_interval\" : 7 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , } Best Practices \u00b6 Exit before front leg expiration to avoid assignment Target strikes near current price Monitor volatility skew between expirations Consider IV changes in back month","title":"Calendar Spreads"},{"location":"strategies/calendars/#calendar-spreads","text":"Calendar spreads (also called time spreads or horizontal spreads) use options with the same strike but different expiration dates. They profit from time decay differential and changes in implied volatility.","title":"Calendar Spreads"},{"location":"strategies/calendars/#long-call-calendar","text":"","title":"Long Call Calendar"},{"location":"strategies/calendars/#description","text":"Sell a near-term call and buy a longer-term call at the same strike. Profits from time decay and volatility expansion in the back month. Composition: - Short 1 front-month call (near expiration) - Long 1 back-month call (longer expiration) - Both at the same strike","title":"Description"},{"location":"strategies/calendars/#example","text":"import optopsy as op results = op . long_call_calendar ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , exit_dte = 7 # Exit 7 days before front expiration )","title":"Example"},{"location":"strategies/calendars/#use-cases","text":"Neutral markets near the strike Expecting volatility increase Time decay plays","title":"Use Cases"},{"location":"strategies/calendars/#short-call-calendar","text":"","title":"Short Call Calendar"},{"location":"strategies/calendars/#description_1","text":"Buy the near-term call, sell the longer-term call. Profits from significant movement away from strike. Composition: - Long 1 front-month call - Short 1 back-month call - Both at the same strike","title":"Description"},{"location":"strategies/calendars/#example_1","text":"results = op . short_call_calendar ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 )","title":"Example"},{"location":"strategies/calendars/#long-put-calendar","text":"","title":"Long Put Calendar"},{"location":"strategies/calendars/#description_2","text":"Similar to long call calendar but with puts. Profits from neutral price action at the strike. Composition: - Short 1 front-month put - Long 1 back-month put - Both at the same strike","title":"Description"},{"location":"strategies/calendars/#example_2","text":"results = op . long_put_calendar ( data )","title":"Example"},{"location":"strategies/calendars/#short-put-calendar","text":"","title":"Short Put Calendar"},{"location":"strategies/calendars/#description_3","text":"Opposite of long put calendar. Profits from movement away from strike. Composition: - Long 1 front-month put - Short 1 back-month put - Both at the same strike","title":"Description"},{"location":"strategies/calendars/#example_3","text":"results = op . short_put_calendar ( data )","title":"Example"},{"location":"strategies/calendars/#key-parameters","text":"Calendar spreads use different default parameters: calendar_default_kwargs = { \"front_dte_min\" : 20 , # Min DTE for front leg \"front_dte_max\" : 40 , # Max DTE for front leg \"back_dte_min\" : 50 , # Min DTE for back leg \"back_dte_max\" : 90 , # Max DTE for back leg \"exit_dte\" : 7 , # Exit 7 days before front expiration \"dte_interval\" : 7 , \"otm_pct_interval\" : 0.05 , \"max_otm_pct\" : 0.5 , }","title":"Key Parameters"},{"location":"strategies/calendars/#best-practices","text":"Exit before front leg expiration to avoid assignment Target strikes near current price Monitor volatility skew between expirations Consider IV changes in back month","title":"Best Practices"},{"location":"strategies/covered/","text":"Covered Strategies \u00b6 Covered strategies combine stock positions with options for income generation or downside protection. Synthetic Implementation Optopsy simulates covered strategies using deep ITM calls as synthetic stock positions, since the library works with options data only. Covered Call \u00b6 Description \u00b6 Generate income by selling calls against a long stock position (or synthetic long via deep ITM call). Composition: - Long underlying (simulated via long deep ITM call) - Short 1 call at higher strike Example \u00b6 import optopsy as op results = op . covered_call ( data , max_entry_dte = 45 , exit_dte = 21 ) Use Cases \u00b6 Generate income on stock holdings Willing to sell stock at higher price Neutral to slightly bullish outlook Protective Put (Married Put) \u00b6 Description \u00b6 Buy downside protection by purchasing puts against a long stock position. Composition: - Long underlying (simulated via long deep ITM call) - Long 1 put at lower strike for protection Example \u00b6 results = op . protective_put ( data , max_entry_dte = 90 , exit_dte = 60 ) Use Cases \u00b6 Hedging long stock positions Protection during uncertain periods Portfolio insurance","title":"Covered Strategies"},{"location":"strategies/covered/#covered-strategies","text":"Covered strategies combine stock positions with options for income generation or downside protection. Synthetic Implementation Optopsy simulates covered strategies using deep ITM calls as synthetic stock positions, since the library works with options data only.","title":"Covered Strategies"},{"location":"strategies/covered/#covered-call","text":"","title":"Covered Call"},{"location":"strategies/covered/#description","text":"Generate income by selling calls against a long stock position (or synthetic long via deep ITM call). Composition: - Long underlying (simulated via long deep ITM call) - Short 1 call at higher strike","title":"Description"},{"location":"strategies/covered/#example","text":"import optopsy as op results = op . covered_call ( data , max_entry_dte = 45 , exit_dte = 21 )","title":"Example"},{"location":"strategies/covered/#use-cases","text":"Generate income on stock holdings Willing to sell stock at higher price Neutral to slightly bullish outlook","title":"Use Cases"},{"location":"strategies/covered/#protective-put","text":"","title":"Protective Put (Married Put)"},{"location":"strategies/covered/#description_1","text":"Buy downside protection by purchasing puts against a long stock position. Composition: - Long underlying (simulated via long deep ITM call) - Long 1 put at lower strike for protection","title":"Description"},{"location":"strategies/covered/#example_1","text":"results = op . protective_put ( data , max_entry_dte = 90 , exit_dte = 60 )","title":"Example"},{"location":"strategies/covered/#use-cases_1","text":"Hedging long stock positions Protection during uncertain periods Portfolio insurance","title":"Use Cases"},{"location":"strategies/diagonals/","text":"Diagonal Spreads \u00b6 Diagonal spreads combine elements of vertical spreads and calendar spreads, using different strikes AND different expirations. These hybrid strategies offer flexible profit zones and directional bias. Long Call Diagonal \u00b6 Description \u00b6 Buy a longer-term call at one strike and sell a shorter-term call at a different strike. Combines time decay and directional movement. Composition: - Short 1 front-month call - Long 1 back-month call - Different strikes for each leg Example \u00b6 import optopsy as op results = op . long_call_diagonal ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , exit_dte = 7 ) Use Cases \u00b6 Bullish to neutral bias with income More flexible than calendars Adjustable directional exposure Short Call Diagonal \u00b6 Description \u00b6 Opposite of long call diagonal. Buy near-term, sell longer-term at different strikes. Composition: - Long 1 front-month call - Short 1 back-month call - Different strikes for each leg Example \u00b6 results = op . short_call_diagonal ( data ) Long Put Diagonal \u00b6 Description \u00b6 Similar structure to call diagonals but using puts. Allows bearish to neutral positioning. Composition: - Short 1 front-month put - Long 1 back-month put - Different strikes for each leg Example \u00b6 results = op . long_put_diagonal ( data ) Short Put Diagonal \u00b6 Description \u00b6 Opposite of long put diagonal with reversed expiration dates. Composition: - Long 1 front-month put - Short 1 back-month put - Different strikes for each leg Example \u00b6 results = op . short_put_diagonal ( data ) Diagonal vs Calendar \u00b6 Feature Calendar Spread Diagonal Spread Strikes Same Different Directional Neutral Can be directional Complexity Simple More complex Flexibility Limited High Parameters \u00b6 Diagonal spreads use calendar spread parameters but evaluate all strike combinations: results = op . long_call_diagonal ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , max_otm_pct = 0.30 # Wider range for strike selection ) Strategy Tips \u00b6 Start with calendar, adjust strikes as market moves Monitor both time decay and directional movement More management-intensive than calendars Can convert to vertical spreads or calendars","title":"Diagonal Spreads"},{"location":"strategies/diagonals/#diagonal-spreads","text":"Diagonal spreads combine elements of vertical spreads and calendar spreads, using different strikes AND different expirations. These hybrid strategies offer flexible profit zones and directional bias.","title":"Diagonal Spreads"},{"location":"strategies/diagonals/#long-call-diagonal","text":"","title":"Long Call Diagonal"},{"location":"strategies/diagonals/#description","text":"Buy a longer-term call at one strike and sell a shorter-term call at a different strike. Combines time decay and directional movement. Composition: - Short 1 front-month call - Long 1 back-month call - Different strikes for each leg","title":"Description"},{"location":"strategies/diagonals/#example","text":"import optopsy as op results = op . long_call_diagonal ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , exit_dte = 7 )","title":"Example"},{"location":"strategies/diagonals/#use-cases","text":"Bullish to neutral bias with income More flexible than calendars Adjustable directional exposure","title":"Use Cases"},{"location":"strategies/diagonals/#short-call-diagonal","text":"","title":"Short Call Diagonal"},{"location":"strategies/diagonals/#description_1","text":"Opposite of long call diagonal. Buy near-term, sell longer-term at different strikes. Composition: - Long 1 front-month call - Short 1 back-month call - Different strikes for each leg","title":"Description"},{"location":"strategies/diagonals/#example_1","text":"results = op . short_call_diagonal ( data )","title":"Example"},{"location":"strategies/diagonals/#long-put-diagonal","text":"","title":"Long Put Diagonal"},{"location":"strategies/diagonals/#description_2","text":"Similar structure to call diagonals but using puts. Allows bearish to neutral positioning. Composition: - Short 1 front-month put - Long 1 back-month put - Different strikes for each leg","title":"Description"},{"location":"strategies/diagonals/#example_2","text":"results = op . long_put_diagonal ( data )","title":"Example"},{"location":"strategies/diagonals/#short-put-diagonal","text":"","title":"Short Put Diagonal"},{"location":"strategies/diagonals/#description_3","text":"Opposite of long put diagonal with reversed expiration dates. Composition: - Long 1 front-month put - Short 1 back-month put - Different strikes for each leg","title":"Description"},{"location":"strategies/diagonals/#example_3","text":"results = op . short_put_diagonal ( data )","title":"Example"},{"location":"strategies/diagonals/#diagonal-vs-calendar","text":"Feature Calendar Spread Diagonal Spread Strikes Same Different Directional Neutral Can be directional Complexity Simple More complex Flexibility Limited High","title":"Diagonal vs Calendar"},{"location":"strategies/diagonals/#parameters","text":"Diagonal spreads use calendar spread parameters but evaluate all strike combinations: results = op . long_call_diagonal ( data , front_dte_min = 20 , front_dte_max = 40 , back_dte_min = 50 , back_dte_max = 90 , max_otm_pct = 0.30 # Wider range for strike selection )","title":"Parameters"},{"location":"strategies/diagonals/#strategy-tips","text":"Start with calendar, adjust strikes as market moves Monitor both time decay and directional movement More management-intensive than calendars Can convert to vertical spreads or calendars","title":"Strategy Tips"},{"location":"strategies/iron-strategies/","text":"Iron Condors & Iron Butterflies \u00b6 Four-leg strategies that combine credit spreads to create defined-risk, defined-reward positions. These are popular income strategies for neutral to range-bound markets. Iron Condor \u00b6 Description \u00b6 An iron condor combines a bull put spread and a bear call spread, creating a wide profit zone. This is one of the most popular credit strategies. Composition: - Long 1 put at strike A (protection) - Short 1 put at strike B (income) - Short 1 call at strike C (income) - Long 1 call at strike D (protection) Where: A < B < C < D Market Outlook \u00b6 Neutral - Expect the underlying to stay between the short strikes Profits if price stays in the range at expiration Ideal for low-volatility, range-bound markets Profit/Loss \u00b6 Maximum Profit : Net credit received Maximum Loss : Width of spread - net credit Breakeven : Short put strike - net credit, Short call strike + net credit Example \u00b6 import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest iron condors results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.30 , # Wide wings for high probability min_bid_ask = 0.10 ) print ( results ) Use Cases \u00b6 Income generation in range-bound markets After high IV events (post-earnings IV crush) When you expect low volatility Monthly income strategies (45 DTE entry, 21 DTE exit) Management Guidelines \u00b6 Take Profit : Close at 50% of max profit Stop Loss : Close at 200% of credit received or 21 DTE Rolling : Roll untested side if challenged Profit Zone : Typically 60-70% probability of profit Reverse Iron Condor \u00b6 Description \u00b6 The opposite of an iron condor - this strategy profits from large price movements in either direction while defining risk. Composition: - Short 1 put at strike A - Long 1 put at strike B - Long 1 call at strike C - Short 1 call at strike D Where: A < B < C < D Market Outlook \u00b6 High Volatility Expected - Anticipate breakout in either direction Profits if price moves significantly beyond inner strikes Defined-risk alternative to long straddles Profit/Loss \u00b6 Maximum Profit : Width of spread - net debit Maximum Loss : Net debit paid Breakeven : Long put strike + debit, Long call strike - debit Example \u00b6 results = op . reverse_iron_condor ( data , max_entry_dte = 30 , exit_dte = 0 , max_otm_pct = 0.25 # Setup for breakout moves ) Use Cases \u00b6 Before major events expecting big moves Defined-risk volatility plays When you expect a breakout but want limited loss Iron Butterfly \u00b6 Description \u00b6 An iron butterfly is similar to an iron condor but with the short strikes at the same price (ATM), creating a tighter profit zone with higher potential profit. Composition: - Long 1 put at strike A (wing) - Short 1 put at strike B (body) - Short 1 call at strike B (body) - same as short put - Long 1 call at strike C (wing) Where: A < B < C Market Outlook \u00b6 Very Neutral - Expect price to stay at or very near current level Maximum profit if price is exactly at middle strike at expiration Higher reward but narrower profit zone than iron condor Profit/Loss \u00b6 Maximum Profit : Net credit received (larger than iron condor) Maximum Loss : Width of wing - net credit Breakeven : Short strike \u00b1 net credit Example \u00b6 results = op . iron_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.05 , # ATM body for maximum credit min_bid_ask = 0.15 ) Use Cases \u00b6 Expecting price to pin at a specific level Around major strikes with high open interest When you want higher credit than iron condors Lower probability but higher reward than iron condors Pin Risk \u00b6 Stock prices tend to pin at strikes with high open interest Iron butterflies benefit from this pinning effect Monitor expiration week price action carefully Reverse Iron Butterfly \u00b6 Description \u00b6 The opposite of an iron butterfly - profits from large moves away from the center strike. Composition: - Short 1 put at strike A (wing) - Long 1 put at strike B (body) - Long 1 call at strike B (body) - same as long put - Short 1 call at strike C (wing) Where: A < B < C Market Outlook \u00b6 High Volatility - Expect significant move from current price Defined-risk alternative to long straddles Lower cost and defined max loss Profit/Loss \u00b6 Maximum Profit : Width of wing - net debit Maximum Loss : Net debit paid Breakeven : Long strike \u00b1 net debit Example \u00b6 results = op . reverse_iron_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 , max_otm_pct = 0.10 ) Use Cases \u00b6 Before major events (earnings, FDA decisions) When you expect explosive moves Defined-risk alternative to long straddles/strangles Strategy Comparison \u00b6 Strategy Profit Zone Max Profit Max Loss Best For Iron Condor Wide range Medium credit Defined Range-bound income Reverse IC Outside range Defined Net debit Breakout plays Iron Butterfly Narrow (at ATM) Higher credit Defined Pinning at strike Reverse Iron Butterfly Away from ATM Defined Net debit Volatility explosion Iron Condor vs Iron Butterfly \u00b6 Iron Condor: - \u2705 Wider profit zone (60-70% probability) - \u2705 More forgiving if price moves - \u274c Lower credit received - Use when : Moderate confidence in range Iron Butterfly: - \u2705 Higher credit (2-3x more) - \u274c Narrower profit zone (40-50% probability) - \u274c Less forgiving to price movement - Use when : High confidence in pinning Advanced Example: Delta-Neutral Iron Condors \u00b6 # Target delta-neutral positioning results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , # Target specific delta for short strikes delta_min = 0.15 , # ~15-20 delta short strikes delta_max = 0.20 , delta_interval = 0.05 , min_bid_ask = 0.10 , slippage = 'liquidity' ) Risk Management Best Practices \u00b6 Entry Checklist \u00b6 [ ] 45 DTE or less (optimal theta decay) [ ] Credit > 1/3 width of spreads [ ] Probability of profit > 60% [ ] Liquid strikes (tight bid-ask spreads) [ ] Defined position size (< 5% of account per trade) Management Rules \u00b6 Take Profit : Close at 50% max profit (21 DTE) Stop Loss : Close at 200-300% of credit or break-even Rolling : Roll down/up untested side if challenged early Expiration : Avoid holding through expiration (pin risk) Position Sizing \u00b6 Risk no more than 2-5% per trade Iron condors: Width determines risk per contract Example: $5 wide spreads for $2 credit = $300 max risk per IC Greeks Analysis \u00b6 Iron Condor Greeks \u00b6 Theta : Positive (time decay helps you) Vega : Negative (want volatility to decrease) Delta : Near zero (neutral position) Gamma : Negative (position against you if price moves) Optimal Conditions: - High IV \u2192 Sell when IV is elevated - Decreasing volatility \u2192 IV crush benefits position - Time passes \u2192 Theta decay increases profit Common Mistakes to Avoid \u00b6 Holding Too Long : Exit at 50% profit, don't be greedy Wrong IV Environment : Don't sell when IV is low Too Narrow : Ensure adequate buffer between short strikes Ignoring Adjustments : Have a plan if price threatens strikes Over-Sizing : Respect max loss per position Next Steps \u00b6 Learn about Butterfly Spreads for three-leg alternatives Explore Calendar Spreads for time-based strategies See more Examples with risk management Review Parameters for optimization","title":"Iron Condors & Iron Butterflies"},{"location":"strategies/iron-strategies/#iron-condors-iron-butterflies","text":"Four-leg strategies that combine credit spreads to create defined-risk, defined-reward positions. These are popular income strategies for neutral to range-bound markets.","title":"Iron Condors &amp; Iron Butterflies"},{"location":"strategies/iron-strategies/#iron-condor","text":"","title":"Iron Condor"},{"location":"strategies/iron-strategies/#description","text":"An iron condor combines a bull put spread and a bear call spread, creating a wide profit zone. This is one of the most popular credit strategies. Composition: - Long 1 put at strike A (protection) - Short 1 put at strike B (income) - Short 1 call at strike C (income) - Long 1 call at strike D (protection) Where: A < B < C < D","title":"Description"},{"location":"strategies/iron-strategies/#market-outlook","text":"Neutral - Expect the underlying to stay between the short strikes Profits if price stays in the range at expiration Ideal for low-volatility, range-bound markets","title":"Market Outlook"},{"location":"strategies/iron-strategies/#profitloss","text":"Maximum Profit : Net credit received Maximum Loss : Width of spread - net credit Breakeven : Short put strike - net credit, Short call strike + net credit","title":"Profit/Loss"},{"location":"strategies/iron-strategies/#example","text":"import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest iron condors results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.30 , # Wide wings for high probability min_bid_ask = 0.10 ) print ( results )","title":"Example"},{"location":"strategies/iron-strategies/#use-cases","text":"Income generation in range-bound markets After high IV events (post-earnings IV crush) When you expect low volatility Monthly income strategies (45 DTE entry, 21 DTE exit)","title":"Use Cases"},{"location":"strategies/iron-strategies/#management-guidelines","text":"Take Profit : Close at 50% of max profit Stop Loss : Close at 200% of credit received or 21 DTE Rolling : Roll untested side if challenged Profit Zone : Typically 60-70% probability of profit","title":"Management Guidelines"},{"location":"strategies/iron-strategies/#reverse-iron-condor","text":"","title":"Reverse Iron Condor"},{"location":"strategies/iron-strategies/#description_1","text":"The opposite of an iron condor - this strategy profits from large price movements in either direction while defining risk. Composition: - Short 1 put at strike A - Long 1 put at strike B - Long 1 call at strike C - Short 1 call at strike D Where: A < B < C < D","title":"Description"},{"location":"strategies/iron-strategies/#market-outlook_1","text":"High Volatility Expected - Anticipate breakout in either direction Profits if price moves significantly beyond inner strikes Defined-risk alternative to long straddles","title":"Market Outlook"},{"location":"strategies/iron-strategies/#profitloss_1","text":"Maximum Profit : Width of spread - net debit Maximum Loss : Net debit paid Breakeven : Long put strike + debit, Long call strike - debit","title":"Profit/Loss"},{"location":"strategies/iron-strategies/#example_1","text":"results = op . reverse_iron_condor ( data , max_entry_dte = 30 , exit_dte = 0 , max_otm_pct = 0.25 # Setup for breakout moves )","title":"Example"},{"location":"strategies/iron-strategies/#use-cases_1","text":"Before major events expecting big moves Defined-risk volatility plays When you expect a breakout but want limited loss","title":"Use Cases"},{"location":"strategies/iron-strategies/#iron-butterfly","text":"","title":"Iron Butterfly"},{"location":"strategies/iron-strategies/#description_2","text":"An iron butterfly is similar to an iron condor but with the short strikes at the same price (ATM), creating a tighter profit zone with higher potential profit. Composition: - Long 1 put at strike A (wing) - Short 1 put at strike B (body) - Short 1 call at strike B (body) - same as short put - Long 1 call at strike C (wing) Where: A < B < C","title":"Description"},{"location":"strategies/iron-strategies/#market-outlook_2","text":"Very Neutral - Expect price to stay at or very near current level Maximum profit if price is exactly at middle strike at expiration Higher reward but narrower profit zone than iron condor","title":"Market Outlook"},{"location":"strategies/iron-strategies/#profitloss_2","text":"Maximum Profit : Net credit received (larger than iron condor) Maximum Loss : Width of wing - net credit Breakeven : Short strike \u00b1 net credit","title":"Profit/Loss"},{"location":"strategies/iron-strategies/#example_2","text":"results = op . iron_butterfly ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.05 , # ATM body for maximum credit min_bid_ask = 0.15 )","title":"Example"},{"location":"strategies/iron-strategies/#use-cases_2","text":"Expecting price to pin at a specific level Around major strikes with high open interest When you want higher credit than iron condors Lower probability but higher reward than iron condors","title":"Use Cases"},{"location":"strategies/iron-strategies/#pin-risk","text":"Stock prices tend to pin at strikes with high open interest Iron butterflies benefit from this pinning effect Monitor expiration week price action carefully","title":"Pin Risk"},{"location":"strategies/iron-strategies/#reverse-iron-butterfly","text":"","title":"Reverse Iron Butterfly"},{"location":"strategies/iron-strategies/#description_3","text":"The opposite of an iron butterfly - profits from large moves away from the center strike. Composition: - Short 1 put at strike A (wing) - Long 1 put at strike B (body) - Long 1 call at strike B (body) - same as long put - Short 1 call at strike C (wing) Where: A < B < C","title":"Description"},{"location":"strategies/iron-strategies/#market-outlook_3","text":"High Volatility - Expect significant move from current price Defined-risk alternative to long straddles Lower cost and defined max loss","title":"Market Outlook"},{"location":"strategies/iron-strategies/#profitloss_3","text":"Maximum Profit : Width of wing - net debit Maximum Loss : Net debit paid Breakeven : Long strike \u00b1 net debit","title":"Profit/Loss"},{"location":"strategies/iron-strategies/#example_3","text":"results = op . reverse_iron_butterfly ( data , max_entry_dte = 30 , exit_dte = 7 , max_otm_pct = 0.10 )","title":"Example"},{"location":"strategies/iron-strategies/#use-cases_3","text":"Before major events (earnings, FDA decisions) When you expect explosive moves Defined-risk alternative to long straddles/strangles","title":"Use Cases"},{"location":"strategies/iron-strategies/#strategy-comparison","text":"Strategy Profit Zone Max Profit Max Loss Best For Iron Condor Wide range Medium credit Defined Range-bound income Reverse IC Outside range Defined Net debit Breakout plays Iron Butterfly Narrow (at ATM) Higher credit Defined Pinning at strike Reverse Iron Butterfly Away from ATM Defined Net debit Volatility explosion","title":"Strategy Comparison"},{"location":"strategies/iron-strategies/#iron-condor-vs-iron-butterfly","text":"Iron Condor: - \u2705 Wider profit zone (60-70% probability) - \u2705 More forgiving if price moves - \u274c Lower credit received - Use when : Moderate confidence in range Iron Butterfly: - \u2705 Higher credit (2-3x more) - \u274c Narrower profit zone (40-50% probability) - \u274c Less forgiving to price movement - Use when : High confidence in pinning","title":"Iron Condor vs Iron Butterfly"},{"location":"strategies/iron-strategies/#advanced-example-delta-neutral-iron-condors","text":"# Target delta-neutral positioning results = op . iron_condor ( data , max_entry_dte = 45 , exit_dte = 21 , # Target specific delta for short strikes delta_min = 0.15 , # ~15-20 delta short strikes delta_max = 0.20 , delta_interval = 0.05 , min_bid_ask = 0.10 , slippage = 'liquidity' )","title":"Advanced Example: Delta-Neutral Iron Condors"},{"location":"strategies/iron-strategies/#risk-management-best-practices","text":"","title":"Risk Management Best Practices"},{"location":"strategies/iron-strategies/#entry-checklist","text":"[ ] 45 DTE or less (optimal theta decay) [ ] Credit > 1/3 width of spreads [ ] Probability of profit > 60% [ ] Liquid strikes (tight bid-ask spreads) [ ] Defined position size (< 5% of account per trade)","title":"Entry Checklist"},{"location":"strategies/iron-strategies/#management-rules","text":"Take Profit : Close at 50% max profit (21 DTE) Stop Loss : Close at 200-300% of credit or break-even Rolling : Roll down/up untested side if challenged early Expiration : Avoid holding through expiration (pin risk)","title":"Management Rules"},{"location":"strategies/iron-strategies/#position-sizing","text":"Risk no more than 2-5% per trade Iron condors: Width determines risk per contract Example: $5 wide spreads for $2 credit = $300 max risk per IC","title":"Position Sizing"},{"location":"strategies/iron-strategies/#greeks-analysis","text":"","title":"Greeks Analysis"},{"location":"strategies/iron-strategies/#iron-condor-greeks","text":"Theta : Positive (time decay helps you) Vega : Negative (want volatility to decrease) Delta : Near zero (neutral position) Gamma : Negative (position against you if price moves) Optimal Conditions: - High IV \u2192 Sell when IV is elevated - Decreasing volatility \u2192 IV crush benefits position - Time passes \u2192 Theta decay increases profit","title":"Iron Condor Greeks"},{"location":"strategies/iron-strategies/#common-mistakes-to-avoid","text":"Holding Too Long : Exit at 50% profit, don't be greedy Wrong IV Environment : Don't sell when IV is low Too Narrow : Ensure adequate buffer between short strikes Ignoring Adjustments : Have a plan if price threatens strikes Over-Sizing : Respect max loss per position","title":"Common Mistakes to Avoid"},{"location":"strategies/iron-strategies/#next-steps","text":"Learn about Butterfly Spreads for three-leg alternatives Explore Calendar Spreads for time-based strategies See more Examples with risk management Review Parameters for optimization","title":"Next Steps"},{"location":"strategies/singles/","text":"Single-Leg Strategies \u00b6 Single-leg strategies involve buying or selling a single call or put option. These are the simplest options strategies and form the building blocks for more complex multi-leg strategies. Long Calls \u00b6 Description \u00b6 A long call gives you the right to buy the underlying at the strike price. This is a bullish strategy with unlimited profit potential and limited risk (the premium paid). Market Outlook \u00b6 Bullish - Expect significant upward price movement Profits increase as the underlying rises above the strike + premium paid Profit/Loss \u00b6 Maximum Profit : Unlimited (underlying price - strike - premium) Maximum Loss : Premium paid (if underlying stays below strike) Breakeven : Strike + premium paid Example \u00b6 import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest long calls with 30-60 DTE range results = op . long_calls ( data , max_entry_dte = 60 , exit_dte = 30 , max_otm_pct = 0.10 # Slightly OTM calls ) print ( results ) Use Cases \u00b6 Betting on a strong rally Lower-cost alternative to buying stock Earnings plays expecting a positive surprise Breakout trades Short Calls \u00b6 Description \u00b6 A short call obligates you to sell the underlying at the strike if exercised. This is a bearish or neutral income strategy with limited profit and theoretically unlimited risk. Market Outlook \u00b6 Bearish to Neutral - Expect price to stay flat or decline Profits if the underlying stays below the strike at expiration Profit/Loss \u00b6 Maximum Profit : Premium received Maximum Loss : Unlimited (underlying price - strike - premium) Breakeven : Strike + premium received Example \u00b6 results = op . short_calls ( data , max_entry_dte = 45 , exit_dte = 0 , # Hold to expiration max_otm_pct = 0.30 # Sell OTM calls for income ) Use Cases \u00b6 Generating income in neutral/bearish markets Covered call strategies (with stock holdings) High-probability income trades \u26a0\ufe0f Risk Warning \u00b6 Short naked calls have unlimited risk if the underlying rises significantly. Consider defined-risk alternatives like call spreads. Long Puts \u00b6 Description \u00b6 A long put gives you the right to sell the underlying at the strike price. This is a bearish strategy with substantial profit potential and limited risk (the premium paid). Market Outlook \u00b6 Bearish - Expect significant downward price movement Profits increase as the underlying falls below the strike - premium paid Profit/Loss \u00b6 Maximum Profit : Strike - premium - 0 (if underlying goes to zero) Maximum Loss : Premium paid (if underlying stays above strike) Breakeven : Strike - premium paid Example \u00b6 results = op . long_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.15 # Moderately OTM puts ) Use Cases \u00b6 Betting on a market decline Portfolio hedging Earnings plays expecting negative news Breakdown trades Short Puts \u00b6 Description \u00b6 A short put obligates you to buy the underlying at the strike if exercised. This is a bullish income strategy where you collect premium, hoping the option expires worthless. Market Outlook \u00b6 Bullish to Neutral - Expect price to stay flat or rise Profits if the underlying stays above the strike at expiration Profit/Loss \u00b6 Maximum Profit : Premium received Maximum Loss : Strike - premium (if underlying goes to zero) Breakeven : Strike - premium received Example \u00b6 results = op . short_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 , # 20% OTM for safer premium min_bid_ask = 0.10 ) Use Cases \u00b6 Generating income in bullish markets Getting \"paid to wait\" to buy stock at a lower price High-probability credit strategies Wheel strategy (sell puts, get assigned, sell calls) Assignment Considerations \u00b6 If the option is in-the-money at expiration, you'll be obligated to buy shares at the strike price. Ensure you have capital or can close before expiration. Greeks Filtering \u00b6 All single-leg strategies support delta filtering to target specific probability ranges: # Target 0.30 delta options (roughly 30% probability ITM) results = op . long_calls ( data , delta_min = 0.25 , delta_max = 0.35 , delta_interval = 0.05 # Group results by delta ranges ) Slippage Models \u00b6 Configure realistic fill prices: # Use liquidity-based slippage results = op . long_calls ( data , slippage = 'liquidity' , fill_ratio = 0.5 , # 50% through the spread reference_volume = 1000 # Minimum volume for liquid options ) Available slippage modes: - 'mid' - Fill at mid-price (bid+ask)/2 (default) - 'spread' - Buy at ask, sell at bid (worst case) - 'liquidity' - Dynamic fill based on volume/open interest Comparison Table \u00b6 Strategy Direction Max Profit Max Loss Best When Long Call Bullish Unlimited Premium Expecting rally Short Call Bearish/Neutral Premium Unlimited Expecting decline/flat Long Put Bearish Substantial Premium Expecting drop Short Put Bullish/Neutral Premium Substantial Expecting rise/flat Next Steps \u00b6 Learn about Straddles & Strangles Explore Vertical Spreads for defined-risk alternatives See more Examples","title":"Single-Leg Strategies"},{"location":"strategies/singles/#single-leg-strategies","text":"Single-leg strategies involve buying or selling a single call or put option. These are the simplest options strategies and form the building blocks for more complex multi-leg strategies.","title":"Single-Leg Strategies"},{"location":"strategies/singles/#long-calls","text":"","title":"Long Calls"},{"location":"strategies/singles/#description","text":"A long call gives you the right to buy the underlying at the strike price. This is a bullish strategy with unlimited profit potential and limited risk (the premium paid).","title":"Description"},{"location":"strategies/singles/#market-outlook","text":"Bullish - Expect significant upward price movement Profits increase as the underlying rises above the strike + premium paid","title":"Market Outlook"},{"location":"strategies/singles/#profitloss","text":"Maximum Profit : Unlimited (underlying price - strike - premium) Maximum Loss : Premium paid (if underlying stays below strike) Breakeven : Strike + premium paid","title":"Profit/Loss"},{"location":"strategies/singles/#example","text":"import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest long calls with 30-60 DTE range results = op . long_calls ( data , max_entry_dte = 60 , exit_dte = 30 , max_otm_pct = 0.10 # Slightly OTM calls ) print ( results )","title":"Example"},{"location":"strategies/singles/#use-cases","text":"Betting on a strong rally Lower-cost alternative to buying stock Earnings plays expecting a positive surprise Breakout trades","title":"Use Cases"},{"location":"strategies/singles/#short-calls","text":"","title":"Short Calls"},{"location":"strategies/singles/#description_1","text":"A short call obligates you to sell the underlying at the strike if exercised. This is a bearish or neutral income strategy with limited profit and theoretically unlimited risk.","title":"Description"},{"location":"strategies/singles/#market-outlook_1","text":"Bearish to Neutral - Expect price to stay flat or decline Profits if the underlying stays below the strike at expiration","title":"Market Outlook"},{"location":"strategies/singles/#profitloss_1","text":"Maximum Profit : Premium received Maximum Loss : Unlimited (underlying price - strike - premium) Breakeven : Strike + premium received","title":"Profit/Loss"},{"location":"strategies/singles/#example_1","text":"results = op . short_calls ( data , max_entry_dte = 45 , exit_dte = 0 , # Hold to expiration max_otm_pct = 0.30 # Sell OTM calls for income )","title":"Example"},{"location":"strategies/singles/#use-cases_1","text":"Generating income in neutral/bearish markets Covered call strategies (with stock holdings) High-probability income trades","title":"Use Cases"},{"location":"strategies/singles/#risk-warning","text":"Short naked calls have unlimited risk if the underlying rises significantly. Consider defined-risk alternatives like call spreads.","title":"\u26a0\ufe0f Risk Warning"},{"location":"strategies/singles/#long-puts","text":"","title":"Long Puts"},{"location":"strategies/singles/#description_2","text":"A long put gives you the right to sell the underlying at the strike price. This is a bearish strategy with substantial profit potential and limited risk (the premium paid).","title":"Description"},{"location":"strategies/singles/#market-outlook_2","text":"Bearish - Expect significant downward price movement Profits increase as the underlying falls below the strike - premium paid","title":"Market Outlook"},{"location":"strategies/singles/#profitloss_2","text":"Maximum Profit : Strike - premium - 0 (if underlying goes to zero) Maximum Loss : Premium paid (if underlying stays above strike) Breakeven : Strike - premium paid","title":"Profit/Loss"},{"location":"strategies/singles/#example_2","text":"results = op . long_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.15 # Moderately OTM puts )","title":"Example"},{"location":"strategies/singles/#use-cases_2","text":"Betting on a market decline Portfolio hedging Earnings plays expecting negative news Breakdown trades","title":"Use Cases"},{"location":"strategies/singles/#short-puts","text":"","title":"Short Puts"},{"location":"strategies/singles/#description_3","text":"A short put obligates you to buy the underlying at the strike if exercised. This is a bullish income strategy where you collect premium, hoping the option expires worthless.","title":"Description"},{"location":"strategies/singles/#market-outlook_3","text":"Bullish to Neutral - Expect price to stay flat or rise Profits if the underlying stays above the strike at expiration","title":"Market Outlook"},{"location":"strategies/singles/#profitloss_3","text":"Maximum Profit : Premium received Maximum Loss : Strike - premium (if underlying goes to zero) Breakeven : Strike - premium received","title":"Profit/Loss"},{"location":"strategies/singles/#example_3","text":"results = op . short_puts ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 , # 20% OTM for safer premium min_bid_ask = 0.10 )","title":"Example"},{"location":"strategies/singles/#use-cases_3","text":"Generating income in bullish markets Getting \"paid to wait\" to buy stock at a lower price High-probability credit strategies Wheel strategy (sell puts, get assigned, sell calls)","title":"Use Cases"},{"location":"strategies/singles/#assignment-considerations","text":"If the option is in-the-money at expiration, you'll be obligated to buy shares at the strike price. Ensure you have capital or can close before expiration.","title":"Assignment Considerations"},{"location":"strategies/singles/#greeks-filtering","text":"All single-leg strategies support delta filtering to target specific probability ranges: # Target 0.30 delta options (roughly 30% probability ITM) results = op . long_calls ( data , delta_min = 0.25 , delta_max = 0.35 , delta_interval = 0.05 # Group results by delta ranges )","title":"Greeks Filtering"},{"location":"strategies/singles/#slippage-models","text":"Configure realistic fill prices: # Use liquidity-based slippage results = op . long_calls ( data , slippage = 'liquidity' , fill_ratio = 0.5 , # 50% through the spread reference_volume = 1000 # Minimum volume for liquid options ) Available slippage modes: - 'mid' - Fill at mid-price (bid+ask)/2 (default) - 'spread' - Buy at ask, sell at bid (worst case) - 'liquidity' - Dynamic fill based on volume/open interest","title":"Slippage Models"},{"location":"strategies/singles/#comparison-table","text":"Strategy Direction Max Profit Max Loss Best When Long Call Bullish Unlimited Premium Expecting rally Short Call Bearish/Neutral Premium Unlimited Expecting decline/flat Long Put Bearish Substantial Premium Expecting drop Short Put Bullish/Neutral Premium Substantial Expecting rise/flat","title":"Comparison Table"},{"location":"strategies/singles/#next-steps","text":"Learn about Straddles & Strangles Explore Vertical Spreads for defined-risk alternatives See more Examples","title":"Next Steps"},{"location":"strategies/spreads/","text":"Vertical Spreads \u00b6 Vertical spreads combine buying and selling options of the same type (both calls or both puts) with different strikes but the same expiration. These strategies offer defined risk and defined reward. Long Call Spread (Bull Call Spread) \u00b6 Description \u00b6 A bullish strategy that buys a lower strike call and sells a higher strike call, reducing cost but capping upside. Composition: - Long 1 call at lower strike X - Short 1 call at higher strike Y Example \u00b6 import optopsy as op results = op . long_call_spread ( data , max_entry_dte = 45 , exit_dte = 21 ) Short Call Spread (Bear Call Spread) \u00b6 Description \u00b6 A bearish credit strategy profiting when the underlying stays below the short strike. Composition: - Short 1 call at lower strike X - Long 1 call at higher strike Y (protection) Example \u00b6 results = op . short_call_spread ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 ) Long Put Spread (Bear Put Spread) \u00b6 Description \u00b6 A bearish strategy profiting from downward moves with defined risk. Composition: - Short 1 put at lower strike X - Long 1 put at higher strike Y Example \u00b6 results = op . long_put_spread ( data , max_entry_dte = 45 , exit_dte = 21 ) Short Put Spread (Bull Put Spread) \u00b6 Description \u00b6 A bullish credit strategy profiting when the underlying stays above the short strike. Composition: - Long 1 put at lower strike X (protection) - Short 1 put at higher strike Y Example \u00b6 results = op . short_put_spread ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 ) Comparison Table \u00b6 Spread Direction Type Max Profit Max Loss Long Call Bullish Debit Width - debit Debit paid Short Call Bearish Credit Credit Width - credit Long Put Bearish Debit Width - debit Debit paid Short Put Bullish Credit Credit Width - credit","title":"Vertical Spreads"},{"location":"strategies/spreads/#vertical-spreads","text":"Vertical spreads combine buying and selling options of the same type (both calls or both puts) with different strikes but the same expiration. These strategies offer defined risk and defined reward.","title":"Vertical Spreads"},{"location":"strategies/spreads/#long-call-spread","text":"","title":"Long Call Spread (Bull Call Spread)"},{"location":"strategies/spreads/#description","text":"A bullish strategy that buys a lower strike call and sells a higher strike call, reducing cost but capping upside. Composition: - Long 1 call at lower strike X - Short 1 call at higher strike Y","title":"Description"},{"location":"strategies/spreads/#example","text":"import optopsy as op results = op . long_call_spread ( data , max_entry_dte = 45 , exit_dte = 21 )","title":"Example"},{"location":"strategies/spreads/#short-call-spread","text":"","title":"Short Call Spread (Bear Call Spread)"},{"location":"strategies/spreads/#description_1","text":"A bearish credit strategy profiting when the underlying stays below the short strike. Composition: - Short 1 call at lower strike X - Long 1 call at higher strike Y (protection)","title":"Description"},{"location":"strategies/spreads/#example_1","text":"results = op . short_call_spread ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 )","title":"Example"},{"location":"strategies/spreads/#long-put-spread","text":"","title":"Long Put Spread (Bear Put Spread)"},{"location":"strategies/spreads/#description_2","text":"A bearish strategy profiting from downward moves with defined risk. Composition: - Short 1 put at lower strike X - Long 1 put at higher strike Y","title":"Description"},{"location":"strategies/spreads/#example_2","text":"results = op . long_put_spread ( data , max_entry_dte = 45 , exit_dte = 21 )","title":"Example"},{"location":"strategies/spreads/#short-put-spread","text":"","title":"Short Put Spread (Bull Put Spread)"},{"location":"strategies/spreads/#description_3","text":"A bullish credit strategy profiting when the underlying stays above the short strike. Composition: - Long 1 put at lower strike X (protection) - Short 1 put at higher strike Y","title":"Description"},{"location":"strategies/spreads/#example_3","text":"results = op . short_put_spread ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 )","title":"Example"},{"location":"strategies/spreads/#comparison-table","text":"Spread Direction Type Max Profit Max Loss Long Call Bullish Debit Width - debit Debit paid Short Call Bearish Credit Credit Width - credit Long Put Bearish Debit Width - debit Debit paid Short Put Bullish Credit Credit Width - credit","title":"Comparison Table"},{"location":"strategies/straddles-strangles/","text":"Straddles & Strangles \u00b6 Straddles and strangles are volatility-based strategies that combine calls and puts to profit from large price movements (long) or low volatility (short). Long Straddle \u00b6 Description \u00b6 A long straddle consists of buying a call and a put at the same strike , typically at-the-money. This strategy profits from large price movements in either direction. Composition: - Long 1 call at strike X - Long 1 put at strike X Market Outlook \u00b6 High Volatility Expected - Anticipate a significant move up or down Direction doesn't matter, only magnitude Common before earnings announcements or major events Profit/Loss \u00b6 Maximum Profit : Unlimited (in either direction) Maximum Loss : Total premiums paid (if price stays at strike) Breakeven : Strike \u00b1 total premium paid Example \u00b6 import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest long straddles results = op . long_straddles ( data , max_entry_dte = 30 , exit_dte = 0 , # Hold to expiration max_otm_pct = 0.05 # Near ATM ) print ( results ) Use Cases \u00b6 Earnings plays expecting big moves Before Fed announcements or major economic data When implied volatility is low but you expect an explosion Binary events (FDA approvals, court rulings) Short Straddle \u00b6 Description \u00b6 A short straddle consists of selling a call and a put at the same strike . This strategy profits when the price stays near the strike at expiration. Composition: - Short 1 call at strike X - Short 1 put at strike X Market Outlook \u00b6 Low Volatility Expected - Price stays stable Maximum profit if price is exactly at strike at expiration Profits erode if price moves significantly in either direction Profit/Loss \u00b6 Maximum Profit : Total premiums received Maximum Loss : Unlimited (if price moves far from strike) Breakeven : Strike \u00b1 total premium received Example \u00b6 results = op . short_straddles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.05 , # ATM straddles min_bid_ask = 0.20 # Ensure liquid options ) Use Cases \u00b6 High implied volatility environments After earnings when IV crush is expected Range-bound markets Income generation in low-volatility periods \u26a0\ufe0f Risk Warning \u00b6 Short straddles have unlimited risk in both directions. Consider iron butterflies for defined-risk alternatives. Long Strangle \u00b6 Description \u00b6 A long strangle consists of buying an OTM call and an OTM put at different strikes . This is similar to a long straddle but cheaper with wider breakevens. Composition: - Long 1 OTM put at strike X - Long 1 OTM call at strike Y (Y > X) Market Outlook \u00b6 High Volatility Expected - Anticipate a large move Lower cost than straddles but requires bigger move to profit Better risk/reward than straddles for explosive moves Profit/Loss \u00b6 Maximum Profit : Unlimited (in either direction) Maximum Loss : Total premiums paid Breakeven : Put strike - total premium, Call strike + total premium Example \u00b6 results = op . long_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 # Wider strikes for lower cost ) Use Cases \u00b6 Lower-cost volatility plays Before major events with unknown outcomes When you expect a significant move but want to reduce cost Higher probability of profit than straddles on massive moves Short Strangle \u00b6 Description \u00b6 A short strangle consists of selling an OTM call and an OTM put at different strikes . This provides a wider profit zone than a short straddle. Composition: - Short 1 OTM put at strike X - Short 1 OTM call at strike Y (Y > X) Market Outlook \u00b6 Low to Moderate Volatility - Price stays in a range Wider profit zone than short straddles More forgiving if price moves moderately Profit/Loss \u00b6 Maximum Profit : Total premiums received Maximum Loss : Unlimited (past short strikes) Breakeven : Put strike - total premium, Call strike + total premium Example \u00b6 results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.30 , # Wide strikes for safer range min_bid_ask = 0.15 ) Use Cases \u00b6 Income in range-bound markets Higher probability of success than short straddles After high IV events (post-earnings) When you expect low volatility but want buffer Management Tips \u00b6 Consider closing at 50% of max profit Roll untested side if needed Monitor position size carefully due to undefined risk Strategy Comparison \u00b6 Strategy Strikes Premium Profit Zone Best For Long Straddle Same Higher cost Wide (any big move) Maximum volatility plays Long Strangle Different Lower cost Wider breakevens Lower-cost volatility Short Straddle Same Higher credit Narrow (at strike) Maximum income, low vol Short Strangle Different Lower credit Wider range Safer income, moderate vol Greeks Considerations \u00b6 For Long Straddles/Strangles \u00b6 Positive Vega - Benefit from volatility increases Negative Theta - Time decay works against you Trade : Buy when IV is low, sell when IV spikes For Short Straddles/Strangles \u00b6 Negative Vega - Hurt by volatility increases Positive Theta - Time decay works for you Trade : Sell when IV is high, benefit from IV crush Example: IV Filtering \u00b6 # Target high IV environments for short strangles results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 , # Filter for liquid, high IV options min_bid_ask = 0.15 , slippage = 'liquidity' ) Risk Management \u00b6 For Long Positions: - Risk is limited to premiums paid - Consider exiting at 100% loss or 200%+ gain - Profits can be substantial on big moves For Short Positions: - \u26a0\ufe0f Risk is unlimited - Consider stop losses or conversion to iron condors/butterflies - Close early at 50-75% max profit - Position size conservatively (small % of account) Next Steps \u00b6 Learn about Vertical Spreads for defined-risk alternatives Explore Iron Butterflies for defined-risk volatility plays See more Examples with IV analysis","title":"Straddles & Strangles"},{"location":"strategies/straddles-strangles/#straddles-strangles","text":"Straddles and strangles are volatility-based strategies that combine calls and puts to profit from large price movements (long) or low volatility (short).","title":"Straddles &amp; Strangles"},{"location":"strategies/straddles-strangles/#long-straddle","text":"","title":"Long Straddle"},{"location":"strategies/straddles-strangles/#description","text":"A long straddle consists of buying a call and a put at the same strike , typically at-the-money. This strategy profits from large price movements in either direction. Composition: - Long 1 call at strike X - Long 1 put at strike X","title":"Description"},{"location":"strategies/straddles-strangles/#market-outlook","text":"High Volatility Expected - Anticipate a significant move up or down Direction doesn't matter, only magnitude Common before earnings announcements or major events","title":"Market Outlook"},{"location":"strategies/straddles-strangles/#profitloss","text":"Maximum Profit : Unlimited (in either direction) Maximum Loss : Total premiums paid (if price stays at strike) Breakeven : Strike \u00b1 total premium paid","title":"Profit/Loss"},{"location":"strategies/straddles-strangles/#example","text":"import optopsy as op data = op . csv_data ( 'SPX_options.csv' ) # Backtest long straddles results = op . long_straddles ( data , max_entry_dte = 30 , exit_dte = 0 , # Hold to expiration max_otm_pct = 0.05 # Near ATM ) print ( results )","title":"Example"},{"location":"strategies/straddles-strangles/#use-cases","text":"Earnings plays expecting big moves Before Fed announcements or major economic data When implied volatility is low but you expect an explosion Binary events (FDA approvals, court rulings)","title":"Use Cases"},{"location":"strategies/straddles-strangles/#short-straddle","text":"","title":"Short Straddle"},{"location":"strategies/straddles-strangles/#description_1","text":"A short straddle consists of selling a call and a put at the same strike . This strategy profits when the price stays near the strike at expiration. Composition: - Short 1 call at strike X - Short 1 put at strike X","title":"Description"},{"location":"strategies/straddles-strangles/#market-outlook_1","text":"Low Volatility Expected - Price stays stable Maximum profit if price is exactly at strike at expiration Profits erode if price moves significantly in either direction","title":"Market Outlook"},{"location":"strategies/straddles-strangles/#profitloss_1","text":"Maximum Profit : Total premiums received Maximum Loss : Unlimited (if price moves far from strike) Breakeven : Strike \u00b1 total premium received","title":"Profit/Loss"},{"location":"strategies/straddles-strangles/#example_1","text":"results = op . short_straddles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.05 , # ATM straddles min_bid_ask = 0.20 # Ensure liquid options )","title":"Example"},{"location":"strategies/straddles-strangles/#use-cases_1","text":"High implied volatility environments After earnings when IV crush is expected Range-bound markets Income generation in low-volatility periods","title":"Use Cases"},{"location":"strategies/straddles-strangles/#risk-warning","text":"Short straddles have unlimited risk in both directions. Consider iron butterflies for defined-risk alternatives.","title":"\u26a0\ufe0f Risk Warning"},{"location":"strategies/straddles-strangles/#long-strangle","text":"","title":"Long Strangle"},{"location":"strategies/straddles-strangles/#description_2","text":"A long strangle consists of buying an OTM call and an OTM put at different strikes . This is similar to a long straddle but cheaper with wider breakevens. Composition: - Long 1 OTM put at strike X - Long 1 OTM call at strike Y (Y > X)","title":"Description"},{"location":"strategies/straddles-strangles/#market-outlook_2","text":"High Volatility Expected - Anticipate a large move Lower cost than straddles but requires bigger move to profit Better risk/reward than straddles for explosive moves","title":"Market Outlook"},{"location":"strategies/straddles-strangles/#profitloss_2","text":"Maximum Profit : Unlimited (in either direction) Maximum Loss : Total premiums paid Breakeven : Put strike - total premium, Call strike + total premium","title":"Profit/Loss"},{"location":"strategies/straddles-strangles/#example_2","text":"results = op . long_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.20 # Wider strikes for lower cost )","title":"Example"},{"location":"strategies/straddles-strangles/#use-cases_2","text":"Lower-cost volatility plays Before major events with unknown outcomes When you expect a significant move but want to reduce cost Higher probability of profit than straddles on massive moves","title":"Use Cases"},{"location":"strategies/straddles-strangles/#short-strangle","text":"","title":"Short Strangle"},{"location":"strategies/straddles-strangles/#description_3","text":"A short strangle consists of selling an OTM call and an OTM put at different strikes . This provides a wider profit zone than a short straddle. Composition: - Short 1 OTM put at strike X - Short 1 OTM call at strike Y (Y > X)","title":"Description"},{"location":"strategies/straddles-strangles/#market-outlook_3","text":"Low to Moderate Volatility - Price stays in a range Wider profit zone than short straddles More forgiving if price moves moderately","title":"Market Outlook"},{"location":"strategies/straddles-strangles/#profitloss_3","text":"Maximum Profit : Total premiums received Maximum Loss : Unlimited (past short strikes) Breakeven : Put strike - total premium, Call strike + total premium","title":"Profit/Loss"},{"location":"strategies/straddles-strangles/#example_3","text":"results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.30 , # Wide strikes for safer range min_bid_ask = 0.15 )","title":"Example"},{"location":"strategies/straddles-strangles/#use-cases_3","text":"Income in range-bound markets Higher probability of success than short straddles After high IV events (post-earnings) When you expect low volatility but want buffer","title":"Use Cases"},{"location":"strategies/straddles-strangles/#management-tips","text":"Consider closing at 50% of max profit Roll untested side if needed Monitor position size carefully due to undefined risk","title":"Management Tips"},{"location":"strategies/straddles-strangles/#strategy-comparison","text":"Strategy Strikes Premium Profit Zone Best For Long Straddle Same Higher cost Wide (any big move) Maximum volatility plays Long Strangle Different Lower cost Wider breakevens Lower-cost volatility Short Straddle Same Higher credit Narrow (at strike) Maximum income, low vol Short Strangle Different Lower credit Wider range Safer income, moderate vol","title":"Strategy Comparison"},{"location":"strategies/straddles-strangles/#greeks-considerations","text":"","title":"Greeks Considerations"},{"location":"strategies/straddles-strangles/#for-long-straddlesstrangles","text":"Positive Vega - Benefit from volatility increases Negative Theta - Time decay works against you Trade : Buy when IV is low, sell when IV spikes","title":"For Long Straddles/Strangles"},{"location":"strategies/straddles-strangles/#for-short-straddlesstrangles","text":"Negative Vega - Hurt by volatility increases Positive Theta - Time decay works for you Trade : Sell when IV is high, benefit from IV crush","title":"For Short Straddles/Strangles"},{"location":"strategies/straddles-strangles/#example-iv-filtering","text":"# Target high IV environments for short strangles results = op . short_strangles ( data , max_entry_dte = 45 , exit_dte = 21 , max_otm_pct = 0.25 , # Filter for liquid, high IV options min_bid_ask = 0.15 , slippage = 'liquidity' )","title":"Example: IV Filtering"},{"location":"strategies/straddles-strangles/#risk-management","text":"For Long Positions: - Risk is limited to premiums paid - Consider exiting at 100% loss or 200%+ gain - Profits can be substantial on big moves For Short Positions: - \u26a0\ufe0f Risk is unlimited - Consider stop losses or conversion to iron condors/butterflies - Close early at 50-75% max profit - Position size conservatively (small % of account)","title":"Risk Management"},{"location":"strategies/straddles-strangles/#next-steps","text":"Learn about Vertical Spreads for defined-risk alternatives Explore Iron Butterflies for defined-risk volatility plays See more Examples with IV analysis","title":"Next Steps"}]}